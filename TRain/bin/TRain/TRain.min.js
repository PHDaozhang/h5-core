var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},cui;!function(t){var e=egret.DisplayObject.prototype;e.$getOriginalBounds=function(){var t=this,e=t.$getContentBounds();if(t.$measureChildBounds(e),t.filters){var r=t.$measureFiltersOffset(!1);e.x+=r.minX,e.y+=r.minY,e.width+=-r.minX+r.maxX,e.height+=-r.minY+r.maxY}return e},e.$onAddToStage=function(t,e){var r=this;r.$stage=t,r.$nestLevel=e,r.$hasAddToStage=!0},e.$onRemoveFromStage=function(){var t=this;t.$nestLevel=0,t.$stage=null,t.$hasAddToStage=!1};var r=function(e){function r(){var t=e.call(this)||this,r=t;return r.$BC=[0/0,0/0,0/0,0/0,0/0,0/0,0/0,0/0,!1,!1,0/0,0/0],r._invalidDL=!1,r._invalidProps=0,r.hitCheckBound=!0,r.$touchEnabled=!0,t}return __extends(r,e),r.prototype.dispose=function(){var t=this;if(!t.disposed){t.ud&&(t.ud=null),t.disposed=!0;for(var e=t.$children,r=0,n=e.length;n>r;++r)e[r].dispose()}},r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r);var n=this;n._inited||(n._inited=!0,n.childrenCreated()),n._invalidProps>0&&n.validateProps(),n._invalidDL&&n.validateDL()},r.prototype.childrenCreated=function(){},Object.defineProperty(r.prototype,"anthorPerX",{get:function(){return this._anthorPerX||0},set:function(t){var e=this;e._anthorPerX=t;var r=e.$getWidth();r>0&&(e.anchorOffsetX=Math.floor(r*t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anthorPerY",{get:function(){return this._anthorPerY||0},set:function(t){var e=this;e._anthorPerY=t;var r=e.$getHeight();r>0&&(e.anchorOffsetY=Math.floor(r*t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return e.prototype.$getWidth.call(this)},set:function(t){t=+t;var e=this.$BC;e[10]!==t&&(e[10]=t,this.$setWidth(t))},enumerable:!0,configurable:!0}),r.prototype.$getExplicitWidth=function(){return this.$BC[10]},r.prototype.$setWidth=function(t){e.prototype.$setWidth.call(this,t),this.invalidateProps(2)},Object.defineProperty(r.prototype,"height",{get:function(){return e.prototype.$getHeight.call(this)},set:function(t){t=+t;var e=this.$BC;e[11]!==t&&(e[11]=t,this.$setHeight(t))},enumerable:!0,configurable:!0}),r.prototype.$getExplicitHeight=function(){return this.$BC[11]},r.prototype.$setHeight=function(t){e.prototype.$setHeight.call(this,t),this.invalidateProps(2)},Object.defineProperty(r.prototype,"filterNm",{get:function(){return this.$BC[12]},set:function(e){this.$BC[12]=e,this.filters=e&&e.length>0?t.uiMgr.getFilters(e):null},enumerable:!0,configurable:!0}),r.prototype.$childAdded=function(t,e){var r=this;t.needPLayout&&r.openLayout(),r.isOpenLayout&&(!r.needPLayout||r.$stage?r.validateChildDL(t):r._inited&&r.invalidateDL())},r.prototype.$childRemoved=function(t,e){var r=this;r.isOpenLayout&&r.invalidateDL()},r.prototype.getChildAt=function(t){var e=this.$children;return t>=0&&t<e.length?e[t]:null},r.prototype.addChild=function(t){var e=this,r=e.$children.length;return t.$parent==e&&r--,e.$doAddChild(t,r,!1)},r.prototype.addChildAt=function(t,e){var r=this.$children.length;return(0>e||e>=r)&&(e=r,t.$parent==this&&e--),this.$doAddChild(t,e,!1)},r.prototype.removeChild=function(t){var e=this,r=e.$children.indexOf(t);return t=e.$doRemoveChild(r,!1),e.dispatchEventWith("rmv_child",!1),t},r.prototype.removeChildAt=function(t){var e=this;if(t>=0&&t<e.$children.length){var r=e.$doRemoveChild(t,!1);return e.dispatchEventWith("rmv_child",!1),r}return null},Object.defineProperty(r.prototype,"left",{get:function(){return this.$BC[0]},set:function(t){t=+t;var e=this.$BC;e[0]!==t&&(e[0]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$BC[2]},set:function(t){t=+t;var e=this.$BC;e[2]!==t&&(e[2]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$BC[1]},set:function(t){t=+t;var e=this.$BC;e[1]!==t&&(e[1]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$BC[3]},set:function(t){t=+t;var e=this.$BC;e[3]!=t&&(e[3]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hCenter",{get:function(){return this.$BC[4]},set:function(t){t=+t;var e=this.$BC;e[4]!==t&&(e[4]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vCenter",{get:function(){return this.$BC[5]},set:function(t){t=+t;var e=this.$BC;e[5]!==t&&(e[5]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perWidth",{get:function(){return this.$BC[6]},set:function(t){t=+t;var e=this.$BC;e[6]!==t&&(e[6]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perHeight",{get:function(){return this.$BC[7]},set:function(t){t=+t;var e=this.$BC;e[7]!==t&&(e[7]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPLayout",{get:function(){return this.$BC[8]},enumerable:!0,configurable:!0}),r.prototype.setNeedPLayout=function(){var t=this,e=t.$BC;if(!e[8]){e[8]=!0;var r=t.$parent;r&&r.openLayout()}t._inited&&t.invalidateDL()},Object.defineProperty(r.prototype,"isOpenLayout",{get:function(){return this.$BC[9]},enumerable:!0,configurable:!0}),r.prototype.openLayout=function(){this.$BC[9]=!0},Object.defineProperty(r.prototype,"nestLevel",{get:function(){return this.$nestLevel},enumerable:!0,configurable:!0}),r.prototype.getPreferredBounds=function(t){var e=this,r=e.$getWidth(),n=e.$getHeight();e.applyMatrix(t,r,n)},r.prototype.applyMatrix=function(t,e,r){var n=this;t.setTo(0,0,e,r);var i=n.$getMatrix();n.isDeltaIdentity(i)?(t.x+=i.tx,t.y+=i.ty):i.$transformBounds(t)},r.prototype.isDeltaIdentity=function(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d},r.prototype.invalidateProps=function(e){var r=this;if(2==e){var n=r._anthorPerX;void 0!=n&&(r.anchorOffsetX=Math.floor(r.$getWidth()*n)),n=r._anthorPerY,void 0!=n&&(r.anchorOffsetY=Math.floor(r.$getHeight()*n))}r.$stage&&!r._invalidPropsFlag&&(r._invalidPropsFlag=!0,t.uiMgr.invalidateProperty(r)),r._invalidProps|=e},r.prototype.validateProps=function(){var t=this;0!=t._invalidProps&&t.commitProps()},r.prototype.commitProps=function(){var t=this,e=t._invalidProps;(2==(2&e)||1==(1&e))&&t.invalidateDL(),t._invalidProps=0,t._invalidPropsFlag=!1},r.prototype.invalidateDL=function(){var e=this;if(e.$stage&&!e._invalidDLFlag){if(e._invalidDLFlag=!0,e.needPLayout){var r=e.$parent;r&&r.invalidateDL()}t.uiMgr.invalidateDL(e)}e._invalidDL=!0},r.prototype.validateDL=function(){var t=this;t._invalidDL=!1,t._invalidDLFlag=!1,t.isOpenLayout&&t.updateDL()},r.prototype.validateChildDL=function(t){var e=this;if(e.isOpenLayout){var r=e.$getWidth();if(0==r)return;var n=e.$getHeight();if(0==n)return;e.adjChildDL(t,r,n)}},r.prototype.updateDL=function(){var t=this,e=t.$getWidth();if(0!=e){var r=t.$getHeight();if(0!=r)for(var n=t.$children,i=0,o=n.length;o>i;i++){var a=n[i];a.needPLayout&&t.adjChildDL(a,e,r)}}},r.prototype.adjChildDL=function(t,e,r){var n=t.left,i=t.right,o=t.perWidth,a=0/0;isNaN(n)||isNaN(i)?isNaN(o)||(a=Math.round(e*o*.01)):a=e-i-n,isNaN(a)?a=t.$getWidth():t.width=a;var s=0/0,u=t.top,l=t.bottom,c=t.perHeight;isNaN(u)||isNaN(l)?isNaN(c)||(s=Math.round(r*c*.01)):s=r-l-u,isNaN(s)?s=t.$getHeight():t.height=s;var p=0/0,h=0/0,d=t.hCenter,f=t.vCenter;isNaN(d)?isNaN(n)?isNaN(i)||(p=e-a-i):p=n:p=Math.round((e-a)/2+d),isNaN(f)?isNaN(u)?isNaN(l)||(h=r-s-l):h=u:h=Math.round((r-s)/2+f),isNaN(p)||(t.x=p+t.anchorOffsetX),isNaN(h)||(t.y=h+t.anchorOffsetY)},r.prototype.$hitTest=function(t,r){var n=this;if(!n.touchEnabled||!n.visible)return null;if(n.hitCheckBound){var i=n.globalToLocal(t,r,egret.$TempPoint),o=egret.$TempRectangle.setTo(0,0,n.$getWidth(),n.$getHeight()),a=n.$scrollRect;if(a&&(o.x=a.x,o.y=a.y),!o.contains(i.x,i.y))return null}var s=e.prototype.$hitTest.call(this,t,r);return s||n.touchThrough||(s=n),s},r.prototype.$measureChildBounds=function(){},r.prototype.$measureContentBounds=function(t){var e=this.$BC[10];e&&(t.width=e),e=this.$BC[11],e&&(t.height=e)},r}(egret.DisplayObjectContainer);t.BaseContainer=r,__reflect(r.prototype,"cui.BaseContainer",["cui.IBaseContainer","cui.IBaseCtrl","cui.ILayout","egret.DisplayObject"])}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"skinName",{get:function(){return this._skinName},set:function(t){var e=this,r=e._skinName;r!=t&&(e._skinName=t,e.parseSkinName())},enumerable:!0,configurable:!0}),e.prototype.parseSkinName=function(){var t,e=this,r=e.skinName;if(r)if(r.prototype)t=new r;else{var n=TRain.UITheme.getSkin(r);t=new n,t.skinParts=n.skinParts,t.needRess=n.needRess}e.setSkin(t)},e.prototype.setSkin=function(t){var e=this,r=e._skin;if(r){r.hostComponent=null;for(var n=r.skinParts,i=n.length,o=0;i>o;o++){var a=n[o];e[a]&&delete e[a]}var s=r.elementsContent;if(s){i=s.length;for(var o=0;i>o;o++)e.removeChild(s[o])}e._needRess=null}if(e._skin=t,t){t.hostComponent=e;var n=t.skinParts;if(n)for(var u=n.length,o=0;u>o;o++){var a=n[o];e[a]=t[a]}e._needRess=t.needRess;var s=t.elementsContent;if(s)for(var o=s.length-1;o>=0;o--)e.addChildAt(s[o],0);TRain.core.addDelayDo(e.onPartAdded,e,0)}},e.prototype.onPartAdded=function(){},Object.defineProperty(e.prototype,"enabled",{get:function(){return!this._disabled},set:function(t){var e=this;e._disabled!==!t&&(e._disabled=!t,e.$touchEnabled=t,e.invalidateProps(4))},enumerable:!0,configurable:!0}),e.prototype.getState=function(){return""},e.prototype.commitProps=function(){var e=this,r=e._invalidProps;if(4==(4&r)){var n=e._skin;n&&n.hasStates()&&n.applyState(e.getState())}t.prototype.commitProps.call(this)},e}(t.BaseContainer);t.Component=e,__reflect(e.prototype,"cui.Component")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this,r=e;return r.trigTm=0,r.touchChildren=!1,r._touchCaptured=!1,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouchBegin,r),e}return __extends(e,t),e.prototype.dispose=function(){var e=this;e.clearTouchTm(),e.onTouchFinish(),e._cb=null,t.prototype.dispose.call(this)},e.prototype.setTarget=function(t,e){this._cb={fun:t,tar:e}},e.prototype.$hitTest=function(t,e){var r=this;if(!r.touchEnabled||!r.visible)return null;var n=r.globalToLocal(t,e,egret.$TempPoint),i=egret.$TempRectangle.setTo(0,0,r.width,r.height);return i.contains(n.x,n.y)?r:null},e.prototype.onTouchBegin=function(t){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e);var r=e.$stage;r.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchFinish,e),e._tempStage=r,e._touchCaptured=!0,e.invalidateProps(4),t.updateAfterEvent(),e.trigTm>0&&(e._tmTag=TRain.core.addFrameDo(e.longTigger,e,!1,e.trigTm),e._longTriged=!1)},e.prototype.onTouchEnd=function(t){var e=this;e.onTouchFinish(),t.isDefaultPrevented()||(t.preventDefault(),e._longTriged||e.buttonReleased())},e.prototype.onTouchFinish=function(){var t=this;t.clearTouchTm();var e=t._tempStage;e&&(t._tempStage=null,e.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchFinish,t),t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t._touchCaptured=!1,t.invalidateProps(4))},e.prototype.longTigger=function(){var t=this;t._longTriged=!0,t._touchCaptured?t.buttonReleased():t.clearTouchTm()},e.prototype.clearTouchTm=function(){var t=this._tmTag;t&&(this._tmTag=0,TRain.core.rmvFrameDoById(t))},e.prototype.getState=function(){var t=this;return t.enabled?t._touchCaptured?"down":"up":"disabled"},Object.defineProperty(e.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),e.prototype.buttonReleased=function(){var t=this,e=t._cb;if(e&&e.fun.call(e.tar,t),t.enabled){var r=t._sound;r&&TRain.soundMgr.playSFX(r)}},e}(t.Component);t.SimpleButton=e,__reflect(e.prototype,"cui.SimpleButton")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this,r=e;return r.$Group=[0,0,0,0,!1],e}return __extends(e,t),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(t){var e=this;e._layout!=t&&(e._layout&&(e._layout.target=null),e._layout=t,t&&(t.target=e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpenLayout",{get:function(){return!!this._layout||this.$BC[9]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,r=0;e>r;r++)this.addChild(t[r])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this.$Group[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.$Group[1]},enumerable:!0,configurable:!0}),e.prototype.setContentSize=function(t,e){var r=this,n=r.$Group;n[0]=t,n[1]=e,n=r.$BC,isNaN(n[10])&&r.$setWidth(t),isNaN(n[11])&&r.$setHeight(e)},e.prototype.getElementRect=function(t){var e=this,r=e.numElements;if(0>=r)return null;t>=r&&(t=r-1);var n=this._layout;if(n)return n.getElementRect(t);var i=null,o=this.getElementAt(t);return o&&(i={x:o.$getX(),y:o.$getY(),w:o.$getWidth(),h:o.$getHeight()}),i},e.prototype.getElementSize=function(t){var e=this,r=e.numElements;if(0>=r)return{w:0,h:0};t>=r&&(t=r-1);var n=this._layout;if(n)return n.getElementSize(t);var i={w:0,h:0},o=this.getElementAt(t);return o&&(i.w=o.$getWidth(),i.h=o.$getHeight()),i},e.prototype.getElementIdxByPos=function(t,e){var r=this.numElements;if(0>=r||0>t&&0>e)return-1;var n=this._layout;if(n)return n.getElementIdxByPos(t,e);for(var i=0;r>i;i++){var o=this.getElementAt(i);if(o){var a=o.$getX(),s=o.$getY();if(t>=a&&e>=s&&t<=a+o.$getWidth()&&e<=s+o.$getHeight())return i}}return-1},Object.defineProperty(e.prototype,"numElements",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),e.prototype.getElementAt=function(t){return this.getChildAt(t)},e.prototype.getVirtualElementAt=function(t){return this.getChildAt(t)},e.prototype.setIndicesInView=function(t,e){for(var r=0,n=this.$children;t>r;r++)n[r].$setVisible(!1);for(;e>=r;r++)n[r].$setVisible(!0);for(var i=n.length;i>r;r++)n[r].$setVisible(!1)},e.prototype.isElementInView=function(t){var e=this.getChildAt(t);return e?e.visible:!1},Object.defineProperty(e.prototype,"scrollEnabled",{get:function(){return this.$Group[4]},set:function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollH",{get:function(){return this.$Group[2]},set:function(t){t=+t||0;var e=this,r=e.$Group;t!==r[2]&&(r[2]=t,e.invalidateDL())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollV",{get:function(){return this.$Group[3]},set:function(t){t=+t||0;var e=this,r=e.$Group;t!=r[3]&&(r[3]=t,e.invalidateDL())},enumerable:!0,configurable:!0}),e.prototype.updateScrollRect=function(){var t=this,e=t.$Group,r=e[4],n=this.$scrollRect;return r?(n?(n.x=e[2],n.y=e[3],n.width=t.$getWidth(),n.height=t.$getHeight()):n=new egret.Rectangle(e[2],e[3],t.$getWidth(),t.$getHeight()),t.scrollRect=n):this.$scrollRect&&(t.scrollRect=null),r},e.prototype.validateChildDL=function(e){var r=this,n=r._layout;n?r.invalidateDL():t.prototype.validateChildDL.call(this,e)},e.prototype.validateDL=function(){var e=this,r=e._layout;r?(e._invalidDL=!1,e._invalidDLFlag=!1,r.updateDL(e.$getWidth(),e.$getHeight())):t.prototype.validateDL.call(this),e.updateScrollRect()},e}(t.BaseContainer);t.Group=e,__reflect(e.prototype,"cui.Group",["cui.IViewport"])}(cui||(cui={}));var TRain;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._refCnt=0,e}return __extends(e,t),e.prototype.$hasRef=function(){return this._refCnt>0},e.prototype.$addRef=function(){this._refCnt++},e.prototype.$subRef=function(){this._refCnt--},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.conf&&(this.conf=null)},e}(egret.Texture);t.TexData=e,__reflect(e.prototype,"TRain.TexData");var r=function(){function r(){var t=this;t._imgsetList={},t._waitGCs=[],t._texList={}}return r.prototype.releaseTex=function(t){var e=this,r=t.pname;if(r){var n=e._imgsetList[r];n.releaseBubTex(t)}else t.$subRef(),t.$hasRef()||e._waitGCs.push(t.name)},r.prototype.onTexLoadFin=function(t,r){var n,i=this;return t instanceof e?n=t:(n=new e,n.name=r,n.$bitmapData=t.$bitmapData,n.$initData(t.$bitmapX,t.$bitmapY,t.$bitmapWidth,t.$bitmapHeight,t.$offsetX,t.$offsetY,t.$sourceWidth,t.$sourceHeight,t.$sourceWidth,t.$sourceHeight),i._texList[r]=n),n},r.prototype.getTex=function(e,r,n,i){var o=this,a=e.indexOf("/")>=0;if(!a){var s=e.indexOf("@");if(s>0){var u=e.substring(0,s),l=e.substr(s+1),c=o._imgsetList[u];return c||(c=new t.ImageSet(u),o._imgsetList[u]=c),void c.getTexture(l,function(t){r.call(this,t,e)},n)}}var p=o._texList[e];if(p)return p.$addRef(),void r.call(n,p,e);i=i||"image";var h=function(t){var i;t&&(i=o.onTexLoadFin(t,e),i.$addRef()),r.call(n,i,e)};a?RES.getResByUrl(e,h,o,i):RES.hasRes(e)?RES.getResAsync(e,h,o):RES.getResByUrl(CONF.imgUrl+e+".png",h,o,i)},r.prototype.doGC=function(){for(var t=this,e=t._texList,r=t._waitGCs,n=0,i=r;n<i.length;n++){var o=i[n],a=e[o];a&&!a.$hasRef()&&(delete e[o],RES.destroyRes(o))}r.length=0},r.prototype.getFont=function(t,e,r){var n=CONF.fontUrl+t+".fnt",i=RES.getAnalyzer("fnt").getRes(n);if(i)return void e.call(r,i,t);var o=function(n){e.call(r,n,t)};RES.getResByUrl(n,o,r,"fnt")},r.prototype.getMultiRes=function(t,e,r,n){function i(i,u){if(o++,i){var l=t.indexOf(u);s[l]=i}else a=!1;o>=t.length&&e.call(r,a,s,n)}for(var o=0,a=!0,s=[],u=0,l=t.length;l>u;++u)RES.getResAsync(t[u],i,this)},r.prototype.getUrlRes=function(t,e){return RES.getAnalyzer(t).getRes(e)},r.prototype.destroyRes=function(t){return RES.destroyRes(t)},r.prototype.getAsset=function(t,e,r){if(RES.hasRes(t)){var n=RES.getRes(t);n?e.call(r,n,t):RES.getResAsync(t,e,r)}else e.call(r,null,t)},r.prototype.getUrlAsset=function(t,e,r,n){RES.getResByUrl(t,e,r,n)},r.prototype.getUrlAssets=function(t,e,n,i,o){function a(e,r){if(s++,e){var a=t.indexOf(r);l[a]=e}else u=!1;s>=t.length&&n.call(i,u,l,o)}for(var s=0,u=!0,l=[],c=this,p=r.texTps,h=0,d=t.length;d>h;++h){var f=e[h],v=t[h];p.indexOf(f)<0?RES.getResByUrl(v,a,c,f):c.getTex(v,a,c,f)}},r.texTps=["image","mc"],r}();t.AssetManager=r,__reflect(r.prototype,"TRain.AssetManager"),t.assetMgr=new r}(TRain||(TRain={}));var cui;!function(t){egret.Bitmap.prototype.$setTexture=function(t){var e=this;e._sourceChanged=!1;var r=e.$texture;return t==r?!1:(e.$texture=t,t?e.$refreshImageData():e.setImageData(null,0,0,0,0,0,0,0,0,0,0),e.$renderDirty=!0,!0)};var e=function(e){function r(t){var r=e.call(this)||this,n=r;return n.$BC=[0/0,0/0,0/0,0/0,0/0,0/0,0/0,0/0,!1],n._invalidProps=0,n._sourceChanged=!1,n._source=null,n.$renderNode=new egret.sys.BitmapNode,t&&(n.source=t),r}return __extends(r,e),Object.defineProperty(r.prototype,"anthorPerX",{get:function(){return this._anthorPerX||0},set:function(t){var e=this;e._anthorPerX=t;var r=e.$getWidth();r>0&&(e.anchorOffsetX=Math.floor(r*t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anthorPerY",{get:function(){return this._anthorPerY||0},set:function(t){var e=this;e._anthorPerY=t;var r=e.$getHeight();r>0&&(e.anchorOffsetY=Math.floor(r*t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterNm",{get:function(){return this.$BC[12]},set:function(e){this.$BC[12]=e,this.filters=e&&e.length>0?t.uiMgr.getFilters(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"source",{get:function(){return this._source},set:function(t){var e=this;t!=e._source&&(e._source=t,t?e.$stage?e.handleSourceChange():e._sourceChanged=!0:e.$setTexture(null))},enumerable:!0,configurable:!0}),r.prototype.handleSourceChange=function(){var t=this;t._sourceChanged=!1;var e=t._source;e&&TRain.assetMgr.getTex(e,t.contentChanged,t)},r.prototype.$setTexture=function(t){var e=this;e._sourceChanged=!1;var r=e.$texture;return t==r?!1:(e.$texture=t,t?(e.$refreshImageData(),e.dispatchEventWith(egret.Event.COMPLETE),e.invalidateProps(64)):e.resetBitmapData(),e.$renderDirty=!0,r&&TRain.assetMgr.releaseTex(r),!0)},r.prototype.resetBitmapData=function(){var t=this;t.$bitmapData=null,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0},r.prototype.contentChanged=function(t,e){var r=this,n=!1;e==r._source&&(n=!!r.$setTexture(t)),t&&!n&&TRain.assetMgr.releaseTex(t)},r.prototype.$onAddToStage=function(t,e){egret.DisplayObject.prototype.$onAddToStage.call(this,t,e);var r=this;r._sourceChanged&&r.handleSourceChange(),r._invalidProps>0&&r.validateProps()},r.prototype.$onRemoveFromStage=function(){egret.DisplayObject.prototype.$onRemoveFromStage.call(this)},r.prototype.dispose=function(){var t=this;t._disposed=!0;var e=t.$texture;e&&(t.$texture=null,TRain.assetMgr.releaseTex(e))},r.prototype.$setWidth=function(t){var r=e.prototype.$setWidth.call(this,t);return r&&this.invalidateProps(2),r},r.prototype.$setHeight=function(t){var r=e.prototype.$setHeight.call(this,t);return r&&this.invalidateProps(2),r},Object.defineProperty(r.prototype,"left",{get:function(){return this.$BC[0]},set:function(t){t=+t;var e=this.$BC;e[0]!==t&&(e[0]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$BC[2]},set:function(t){t=+t;var e=this.$BC;e[2]!==t&&(e[2]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$BC[1]},set:function(t){t=+t;var e=this.$BC;e[1]!==t&&(e[1]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$BC[3]},set:function(t){t=+t;var e=this.$BC;e[3]!=t&&(e[3]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hCenter",{get:function(){return this.$BC[4]},set:function(t){t=+t;var e=this.$BC;e[4]!==t&&(e[4]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vCenter",{get:function(){return this.$BC[5]},set:function(t){t=+t;var e=this.$BC;e[5]!==t&&(e[5]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perWidth",{get:function(){return this.$BC[6]},set:function(t){t=+t;var e=this.$BC;e[6]!==t&&(e[6]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perHeight",{get:function(){return this.$BC[7]},set:function(t){t=+t;var e=this.$BC;e[7]!==t&&(e[7]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPLayout",{get:function(){return this.$BC[8]},enumerable:!0,configurable:!0}),r.prototype.setNeedPLayout=function(){var t=this,e=t.$BC,r=t.$parent;e[8]||(e[8]=!0,r&&r.openLayout()),r&&r.invalidateDL()},r.prototype.invalidateProps=function(e){var r=this;if(2==e||64==e){var n=r._anthorPerX;void 0!=n&&(r.anchorOffsetX=Math.floor(r.$getWidth()*n)),n=r._anthorPerY,void 0!=n&&(r.anchorOffsetY=Math.floor(r.$getHeight()*n))}r.$stage&&!r._invalidPropsFlag&&(r._invalidPropsFlag=!0,t.uiMgr.invalidateProperty(r)),r._invalidProps|=e},r.prototype.validateProps=function(){var t=this,e=t._invalidProps;if(0!=e){var r=t.$BC;r[8]&&t.$parent&&t.$texture&&t.$parent.invalidateDL(),t._invalidProps=0,t._invalidPropsFlag=!1}},r}(egret.Bitmap);t.Image=e,__reflect(e.prototype,"cui.Image",["cui.IBaseCtrl","cui.ILayout","egret.DisplayObject"])}(cui||(cui={}));var CMap=function(){function t(){var t=this;t._keys=[],t._values=[]}return t.prototype.set=function(t,e){var r=this,n=r._keys.indexOf(t);return n>=0?r._values[n]=e:(r._keys.push(t),r._values.push(e)),r},t.prototype.get=function(t){var e=this,r=e._keys.indexOf(t);return r>=0?e._values[r]:null},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return this._keys},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){for(var r=this,n=r._keys,i=r._values,o=n.length,a=0;o>a;++a)t.call(e,i[a],n[a],r)},t.prototype.clear=function(){var t=this;t._keys.length=0,t._values.length=0},t.prototype.has=function(t){return this._keys.indexOf(t)>=0},t.prototype["delete"]=function(t){var e=this,r=e._keys.indexOf(t);return r>=0?(e._keys.splice(r,1),e._values.splice(r,1),!0):!1},t}();__reflect(CMap.prototype,"CMap");var cui;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){var e=this;e._label=t;var r=e.skLabel;r&&(r.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"txtKey",{get:function(){return this._txtKey},set:function(t){var e=this;e._txtKey=t;var r=e.skLabel;r&&(r.txtKey=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){var e=this;e._icon=t;var r=e.skIcon;r&&(r.source=t)},enumerable:!0,configurable:!0}),e.prototype.onPartAdded=function(){var t=this,e=t.skIcon,r=t._icon;r&&e&&(e.source=r);var n=t.skLabel;if(n){var i=t._label;if(i)n.text=i;else{var o=t._txtKey;o&&(n.txtKey=o)}}},e}(t.SimpleButton);t.Button=e,__reflect(e.prototype,"cui.Button")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){var e=this;e._data=t,"width"in t&&(e.width=t.width),"height"in t&&(e.height=t.height),e._inited&&e.dataChanged()},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=this;e._data&&e.dataChanged()},e.prototype.dataChanged=function(){},e}(t.Component);t.DataItem=e,__reflect(e.prototype,"cui.DataItem");var r=function(r){function n(){var t=r.call(this)||this,e=t;return e.$DataGroup=[[],null,null,null],e._range=[0,0],e._idxToItm=new CMap,t}return __extends(n,r),n.prototype.dispose=function(){var t=this;t.onRenderTouchFinish(null);var e=t.$DataGroup[3];e&&(e.removeEventListener("collect_ch",t.onCollectionChange,t),t.$DataGroup[3]=null),t.clearAllRenders(),r.prototype.dispose.call(this)},n.prototype.childrenCreated=function(){var e=this;if(!e._layout){var n=new t.DataLineLayout;n.isHorizontal=!1,e.layout=n}r.prototype.childrenCreated.call(this)},Object.defineProperty(n.prototype,"numElements",{get:function(){var t=this.$DataGroup[3];return t?t.length:0},enumerable:!0,configurable:!0}),n.prototype.getElementAt=function(t){return this._idxToItm.get(t)},n.prototype.getVirtualElementAt=function(t){var e=this,r=e.$DataGroup[3];if(0>t||t>=r.length)return null;var n=e._idxToItm,i=n.get(t);if(!i){var o=r.getItemAt(t);i=e.createRender(),i.itemIndex=t,i.data=o,n.set(t,i),e.addChild(i),e.rendererAdded(i,t,o)}return i},n.prototype.setIndicesInView=function(t,e){var r=this,n=r._range;n[0]=t,n[1]=e;var i=r._idxToItm,o=i.values,a=[],s=o.length,u=0;for(u=0;s>u;u++){var l=o[u],c=l.itemIndex;(t>c||c>e)&&(a.push(c),r.doFreeRender(l))}for(s=a.length,u=0;s>u;u++)i["delete"](a[u])},n.prototype.isElementInView=function(t){return this._idxToItm.has(t)},Object.defineProperty(n.prototype,"itemRender",{get:function(){return this.$DataGroup[1]},set:function(t){var e=this,r=e.$DataGroup;r[1]!=t&&(r[1]=t,e.invalidateProps(8))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemSkinName",{get:function(){return this.$DataGroup[2]},set:function(t){var e=this,r=e.$DataGroup;r[2]!=t&&(r[2]=t,e.invalidateProps(16))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataProvider",{get:function(){return this.$DataGroup[3]},set:function(t){var e=this,r=e.$DataGroup,n=r[3];n!=t&&(n&&n.removeEventListener("collect_ch",e.onCollectionChange,e),r[3]=t,e.invalidateProps(32))},enumerable:!0,configurable:!0}),n.prototype.onCollectionChange=function(t){var e=this;switch(t.kind){case"add":e.itemAddedHandler(t.item,t.location);break;case"remove":e.itemRemovedHandler(t.item,t.location);break;case"update":case"replace":e.itemUpdatedHandler(t.item,t.location);break;case"upidxs":e.idxsUpdatedHandler(t.item);break;case"removeAll":case"reset":case"refresh":e.freeAllRender(),e.invalidateProps(32)}},n.prototype.itemAddedHandler=function(t,e){var r=this;if(r._idxToItm.has(e))r.resetRenderIdxs(),r.invalidateDL();else{var n=r._range;n[0]<=e&&e<=n[1]&&r.invalidateDL()}},n.prototype.itemRemovedHandler=function(t,e){var r=this,n=r._idxToItm,i=n.get(e);i&&(n["delete"](e),r.doFreeRender(i),r.resetRenderIdxs(),r.invalidateDL())},n.prototype.resetRenderIdxs=function(){var t=this,e=t._idxToItm;if(0!=e.size){for(var r,n=t.$DataGroup[3],i=e.values,o=i.length,a=!1,s=0,u=0;o>u;u++)r=i[u],s=n.getItemIndex(r.data),r.itemIndex!=s&&(r.itemIndex=s,a=!0);if(a){i=i.slice(0),e.clear();for(var u=0;o>u;u++)r=i[u],e.set(r.itemIndex,r)}}},n.prototype.itemUpdatedHandler=function(t,e){var r=this._idxToItm.get(e);r&&(r.data=t)},n.prototype.idxsUpdatedHandler=function(t){for(var e=this._idxToItm,r=this.dataProvider,n=0,i=t;n<i.length;n++){var o=i[n],a=e.get(o);a&&(a.data=r.getItemAt(o))}},n.prototype.clearAllRenders=function(){var t=this,e=t._idxToItm,r=e.size;if(r>0){var n=e.values;t.removeChildren();for(var i=0;r>i;i++)n[i].dispose();e.clear()}var o=t.$DataGroup,a=o[0];if(r=a.length,r>0){for(var i=0;r>i;i++)a[i].dispose();o[0]=[]}},n.prototype.freeAllRender=function(){for(var t=this,e=t._idxToItm.values,r=0,n=e.length;n>r;++r)t.doFreeRender(e[r]);t._idxToItm.clear()},n.prototype.doFreeRender=function(t){var e=this,r=e.$DataGroup,n=r[0];n.push(t),e.rendererRemoved(t,t.itemIndex,t.data),e.removeChild(t)},n.prototype.createRender=function(){var t,r=this,n=r.$DataGroup[0];if(n&&n.length>0)t=n.pop();else{var i=r.$DataGroup[1];i||(i=e),t=new i;var o=r.$DataGroup[2];o&&(t.skinName=o)}return t},n.prototype.rendererAdded=function(t,e,r){var n=this;t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onRenderTouchBegin,n)},n.prototype.rendererRemoved=function(t,e,r){var n=this;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onRenderTouchBegin,n)},n.prototype.onRenderTouchBegin=function(t){var e=this,r=t.$currentTarget,n=e.$stage;e._tempStage=n,e._downRender=r,r.addEventListener(egret.TouchEvent.TOUCH_END,e.onRenderTouchEnd,e),r.addEventListener(egret.TouchEvent.TOUCH_END,e.onRenderCaptureEnd,e,!0),n.addEventListener(egret.TouchEvent.TOUCH_END,e.onRenderTouchFinish,e)},n.prototype.onRenderTouchFinish=function(t){var e=this,r=e._downRender;r&&(r.removeEventListener(egret.TouchEvent.TOUCH_END,e.onRenderTouchEnd,e),r.removeEventListener(egret.TouchEvent.TOUCH_END,e.onRenderCaptureEnd,e,!0),e._tempStage.removeEventListener(egret.TouchEvent.TOUCH_END,e.onRenderTouchFinish,e),e._tempStage=null,e._downRender=null)},n.prototype.onRenderCaptureEnd=function(t){var e=this;t.isDefaultPrevented()&&e.onRenderTouchFinish(t)},n.prototype.onRenderTouchEnd=function(t){var e=this,r=e._downRender;if(r){e.onRenderTouchFinish(t);var n=t.$currentTarget;n==r&&e.dispatchEventWith("item_tap",!1,n)}},n.prototype.commitProps=function(){var t=this,e=t.$DataGroup,n=t._invalidProps,i=32==(32&n);if(i||8==(8&n)){if(t.clearAllRenders(),t.dispatchEventWith("view_clear",!1),i){var o=e[3];o&&o.addEventListener("collect_ch",t.onCollectionChange,t),t.scrollV=t.scrollH=0}t.invalidateDL()}if(16==(16&n)){var a=e[2],s=t._idxToItm.values,u=s.length,l=0;
for(l=0;u>l;l++)s[l].skinName=a;var c=e[0];for(u=c.length,l=0;u>l;l++)c[l].skinName=a}r.prototype.commitProps.call(this)},n}(t.Group);t.DataGroup=r,__reflect(r.prototype,"cui.DataGroup")}(cui||(cui={}));var cui;!function(t){var e=function(){function t(){var t=this;t._target=null,t.paddingBottom=0,t.paddingTop=0,t.paddingRight=0,t.paddingLeft=0,t.itemH=0,t.itemW=0,t._startIdx=-1,t._endIdx=-1}return Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){var e=this;e._target!==t&&(e._target=t)},enumerable:!0,configurable:!0}),t.prototype.getElementIdxByPos=function(t,e){return-1},t.prototype.getElementRect=function(t){return null},t.prototype.getElementSize=function(t){var e=this;if(e.isFixedSize())return{w:e.itemW,h:e.itemH};var r=e.target.getElementAt(t);return r?{w:r.width,h:r.height}:{w:0,h:0}},t.prototype.isFixedSize=function(){return this.itemH>0&&this.itemW>0},t.prototype.checkTargetValid=function(t){if(!t||t.numElements<=0)return!1;var e=t.$getWidth(),r=t.$getHeight();return 0>=e||0>=r?!1:!0},t.prototype.scrollPositionChanged=function(){var t=this,e=t._target;if(!t.checkTargetValid(e))return void(t._startIdx=t._endIdx=-1);var r=t.adjustViewIndex(e);r&&(t._inViewCalc=!0,t.target.invalidateDL())},t.prototype.adjustViewIndex=function(t){return!1},t.prototype.updateDL=function(t,e){var r=this,n=r._target;return r.checkTargetValid(n)?(r._inViewCalc?r._inViewCalc=!1:r.adjustViewIndex(n),-1==r._startIdx||-1==r._endIdx?void n.setContentSize(Math.ceil(r.paddingLeft+r.paddingRight),Math.ceil(r.paddingTop+r.paddingBottom)):(n.setIndicesInView(r._startIdx,r._endIdx),void(r.isFixedSize()?r.updateFixSizeDList(t,e):r.updateRealDList(t,e)))):void(r._startIdx=r._endIdx=-1)},t.prototype.updateFixSizeDList=function(t,e){},t.prototype.updateRealDList=function(t,e){},t}();t.LayoutBase=e,__reflect(e.prototype,"cui.LayoutBase")}(cui||(cui={}));var TRain;!function(t){var e=function(){function t(t,e){this._tm=0,this._doCnt=0;var r=this;r._dur=t||1,r._times=e||1,r._tm=0,r._doCnt=0}return Object.defineProperty(t.prototype,"duration",{get:function(){var t=this;return t._dur*t._times},set:function(t){this._dur=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"times",{get:function(){return this._times},set:function(t){this._times=t>0?t:1},enumerable:!0,configurable:!0}),t.prototype.isDone=function(){return this._tm>=this._dur},t.prototype.getTar=function(){return this._tar},t.prototype.start=function(t){var e=this;e._tar=t,e._tm=0,e._doCnt=0},t.prototype.stop=function(){this._tar=null},t.prototype.stopToEnd=function(){var t=this;t._tar&&(t.update(1),t._tar=null)},t.prototype.clear=function(){this._tar=null},t.prototype.step=function(t){var e=this;e._tm+=t;var r=Math.min(1,e._tm/e._dur);if(e.update(r),r>=1){var n=e.times;e._doCnt++,e._doCnt<n&&(e._tm-=e._dur)}},t.prototype.update=function(t){},t}();t.Action=e,__reflect(e.prototype,"TRain.Action");var r=function(t){function e(e){var r=t.call(this)||this;return r._act=e,r}return __extends(e,t),e.prototype.isDone=function(){return!1},e.prototype.stop=function(){var t=this;t._tar=null,t._act.stop()},e.prototype.clear=function(){t.prototype.clear.call(this);var e=this._act;e&&(e.clear(),this._act=null)},e.prototype.setAction=function(t){var e=this,r=e._act;r&&r.stop(),e._act=t;var n=e._tar;n&&t&&t.start(n)},e.prototype.start=function(e){t.prototype.start.call(this,e);var r=this._act;r&&r.start(e)},e.prototype.step=function(t){var e=this,r=e._act;if(r){if(e._tm+=t,r.isDone()){var n=r.duration;t=e._tm-n,t>n&&(t%=n),e._tm=t,r.start(e._tar)}r.step(t)}},e}(e);t.ActionLoop=r,__reflect(r.prototype,"TRain.ActionLoop")}(TRain||(TRain={}));var TRain;!function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return __extends(r,e),r.prototype.getRes=function(t){return this.fileDic[t]},r.prototype.onLoadFinish=function(e){var r=this,n=e.target,i=r.resItemDic[n.$hashCode];delete r.resItemDic[n.hashCode];var o=i.item;if(o.loaded=e.type==egret.Event.COMPLETE,o.loaded){var a=n.response,s=new Uint32Array(a,0,2),u=s[0],l=s[1],c=new Uint8Array(a,8+u,l);egret.BitmapData.create("arraybuffer",c,function(e){var n=new t.TexData;n._setBitmapData(e);var s,c,p,h=new Uint8Array(a,8,u),d=new Uint16Array(h.length);for(s=0,c=h.length;c>s;s++)p=h[s],d[s]=(p<<4&255)+(p>>4);var f,v=String.fromCharCode.apply(null,d),g=u+l+8;if(a.byteLength>g){var y=new Uint16Array(a,g);for(d=new Uint16Array(h.length),s=0,c=y.length;c>s;s++)p=y[s],d[s]=(p<<8&255)+(p>>8);f=String.fromCharCode.apply(null,d)}r.parseSpriteSheet(n,v,o.name,f),i.func.call(i.thisObject,o)})}else i.func.call(i.thisObject,o);r.recycler.push(n)},r.prototype.parseSpriteSheet=function(t,e,r,n){var i=JSON.parse(e),o=i.frames;o&&(t.name=r,t.conf=o,this.fileDic[r]=t)},r.prototype.destroyRes=function(t){var e=this.fileDic,r=e[t];return r?(delete e[t],r.dispose(),!0):!1},r}(RES.BinAnalyzer);t.SheetAnalyzer=e,__reflect(e.prototype,"TRain.SheetAnalyzer"),RES.registerAnalyzer("st",e)}(TRain||(TRain={}));var Profile;!function(t){}(Profile||(Profile={}));var cui;!function(t){var e=function(e){function r(){var t=e.call(this)||this;t._isFocusIn=!1,t._promptColor=6710886;var r=t;return r.type=egret.TextFieldType.INPUT,r._isFocusIn=!1,r.$EditableText=[null,16777215,!1],r.$BC=[0/0,0/0,0/0,0/0,0/0,0/0,0/0,0/0,!1],r._invalidProps=0,t}return __extends(r,e),r.prototype.dispose=function(){this._disposed=!0},Object.defineProperty(r.prototype,"filterNm",{get:function(){return this.$BC[12]},set:function(e){this.$BC[12]=e,this.filters=e&&e.length>0?t.uiMgr.getFilters(e):null},enumerable:!0,configurable:!0}),r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r);var n=this;n.addEventListener(egret.FocusEvent.FOCUS_IN,n.onfocusIn,n),n.addEventListener(egret.FocusEvent.FOCUS_OUT,n.onfocusOut,n),n._invalidProps>0&&n.validateProps()},r.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var t=this;t.removeEventListener(egret.FocusEvent.FOCUS_IN,t.onfocusIn,t),t.removeEventListener(egret.FocusEvent.FOCUS_OUT,t.onfocusOut,t)},r.prototype.onfocusOut=function(){var t=this;t._isFocusIn=!1,t.text||t.showPromptText()},r.prototype.onfocusIn=function(){var t=this;t._isFocusIn=!0,t._showPrompt=!1,t.displayAsPassword=t.$EditableText[2];var e=t.$EditableText,r=t.text;r&&r!=e[0]||(t.textColor=e[1],t.text="")},r.prototype.$getText=function(){var t=e.prototype.$getText.call(this);return t==this.$EditableText[0]&&(t=""),t},r.prototype.$setText=function(t){var r=this,n=r.$EditableText[0];(n!=t||null==n)&&(r._showPrompt=!1,r.textColor=r.$EditableText[1]),r._isFocusIn||(""==t||null==t)&&(t=n,r._showPrompt=!0,e.prototype.$setTextColor.call(this,r._promptColor));var i=e.prototype.$setText.call(this,t);return i},Object.defineProperty(r.prototype,"prompt",{get:function(){return this.$EditableText[0]},set:function(t){var e=this,r=e.$EditableText,n=r[0];if(n!=t){r[0]=t;var i=e.text;i&&i!=n||e.showPromptText()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"promptColor",{get:function(){return this._promptColor},set:function(t){t=0|+t;var e=this;if(e._promptColor!=t){e._promptColor=t;var r=e.text;r&&r!=e.$EditableText[0]||e.showPromptText()}},enumerable:!0,configurable:!0}),r.prototype.showPromptText=function(){var t=this,r=t.$EditableText;t._showPrompt=!0,e.prototype.$setTextColor.call(this,t._promptColor),e.prototype.$setDisplayAsPassword.call(this,!1),t.text=r[0]},r.prototype.$setTextColor=function(t){t=0|+t;var r=this;return r.$EditableText[1]=t,r._showPrompt||e.prototype.$setTextColor.call(this,t),!0},r.prototype.$setDisplayAsPassword=function(t){var r=this;return r.$EditableText[2]=t,r._showPrompt||e.prototype.$setDisplayAsPassword.call(this,t),!0},r.prototype.$setWidth=function(t){var r=e.prototype.$setWidth.call(this,t);return r&&this.invalidateProps(2),r},r.prototype.$setHeight=function(t){var r=e.prototype.$setHeight.call(this,t);return r&&this.invalidateProps(2),r},Object.defineProperty(r.prototype,"left",{get:function(){return this.$BC[0]},set:function(t){t=+t;var e=this.$BC;e[0]!==t&&(e[0]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$BC[2]},set:function(t){t=+t;var e=this.$BC;e[2]!==t&&(e[2]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$BC[1]},set:function(t){t=+t;var e=this.$BC;e[1]!==t&&(e[1]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$BC[3]},set:function(t){t=+t;var e=this.$BC;e[3]!=t&&(e[3]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hCenter",{get:function(){return this.$BC[4]},set:function(t){t=+t;var e=this.$BC;e[4]!==t&&(e[4]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vCenter",{get:function(){return this.$BC[5]},set:function(t){t=+t;var e=this.$BC;e[5]!==t&&(e[5]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perWidth",{get:function(){return this.$BC[6]},set:function(t){t=+t;var e=this.$BC;e[6]!==t&&(e[6]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perHeight",{get:function(){return this.$BC[7]},set:function(t){t=+t;var e=this.$BC;e[7]!==t&&(e[7]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPLayout",{get:function(){return this.$BC[8]},enumerable:!0,configurable:!0}),r.prototype.setNeedPLayout=function(){var t=this,e=t.$BC,r=t.$parent;e[8]||(e[8]=!0,r&&r.openLayout()),r&&r.invalidateDL()},r.prototype.invalidateProps=function(e){var r=this;r.$stage&&!r._invalidPropsFlag&&(r._invalidPropsFlag=!0,t.uiMgr.invalidateProperty(r)),r._invalidProps|=e},r.prototype.validateProps=function(){var t=this,e=t._invalidProps;if(0!=e){var r=t.$BC;r[8]&&t.$parent&&""!=t.$getText()&&t.$parent.invalidateDL(),t._invalidProps=0,t._invalidPropsFlag=!1}},r}(egret.TextField);t.EditableText=e,__reflect(e.prototype,"cui.EditableText",["cui.IDisplayText","cui.IBaseCtrl","cui.ILayout","egret.DisplayObject"])}(cui||(cui={}));var cui;!function(t){var e=function(e){function r(){var t=e.call(this)||this,r=t;return r.$BC=[0/0,0/0,0/0,0/0,0/0,0/0,0/0,0/0],r.tag=-1,r._invalidProps=0,r._stAngle=0,r._endAngle=360,r._color=0,t}return __extends(r,e),r.prototype.dispose=function(){this._disposed=!0},r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r);var n=this;n._invalidProps>0&&n.validateProps()},r.prototype.$setWidth=function(t){e.prototype.$setWidth.call(this,t),e.prototype.$setHeight.call(this,t),this.invalidateProps(2)},Object.defineProperty(r.prototype,"stAngle",{get:function(){return this._stAngle},set:function(t){t=+t,this._stAngle!=t&&(this._stAngle=t,this.invalidateProps(64))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this._endAngle},set:function(t){t=+t,this._endAngle!=t&&(this._endAngle=t,this.invalidateProps(64))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"color",{get:function(){return this._color},set:function(t){t=+t,this._color!=t&&(this._color=t,this.invalidateProps(64))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.$BC[0]},set:function(t){t=+t;var e=this.$BC;e[0]!==t&&(e[0]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$BC[2]},set:function(t){t=+t;var e=this.$BC;e[2]!==t&&(e[2]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$BC[1]},set:function(t){t=+t;var e=this.$BC;e[1]!==t&&(e[1]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$BC[3]},set:function(t){t=+t;var e=this.$BC;e[3]!=t&&(e[3]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hCenter",{get:function(){return this.$BC[4]},set:function(t){t=+t;var e=this.$BC;e[4]!==t&&(e[4]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vCenter",{get:function(){return this.$BC[5]},set:function(t){t=+t;var e=this.$BC;e[5]!==t&&(e[5]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perWidth",{get:function(){return this.$BC[6]},set:function(t){t=+t;var e=this.$BC;e[6]!==t&&(e[6]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perHeight",{get:function(){return this.$BC[6]},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPLayout",{get:function(){return this.$BC[8]},enumerable:!0,configurable:!0}),r.prototype.setNeedPLayout=function(){var t=this,e=t.$BC,r=t.$parent;e[8]||(e[8]=!0,r&&r.openLayout()),r&&r.invalidateDL()},r.prototype.invalidateProps=function(e){var r=this;r.$stage&&!r._invalidPropsFlag&&(r._invalidPropsFlag=!0,t.uiMgr.invalidateProperty(r)),r._invalidProps|=e},r.prototype.validateProps=function(){var t=this,e=t._invalidProps;0!=e&&(t.$parent&&t.drawFan(),t._invalidProps=0,t._invalidPropsFlag=!1)},r.prototype.drawFan=function(){var t=this,e=t.graphics,r=t.width,n=t._stAngle,i=t._endAngle;if(!r||n==i)return void e.clear();var o=Math.floor(r/2+.5);e.beginFill(t.color),e.moveTo(o,o);var a=o*(1+Math.cos(n)),s=o*(1-Math.sin(n));e.lineTo(a,s),e.drawArc(o,o,o,n/180*Math.PI,i/180*Math.PI),e.lineTo(o,o),e.endFill()},r}(egret.Shape);t.FanShape=e,__reflect(e.prototype,"cui.FanShape",["cui.IBaseCtrl","cui.ILayout","egret.DisplayObject"])}(cui||(cui={}));var TRain;!function(t){var e=function(){function t(){var t=this;t._unitTag=1e4,t._tarActs=new CMap,t._tagActs=new CMap}return t.prototype.getUnitTag=function(){return this._unitTag++},t.prototype.addAction=function(t,e,r,n){var i=this._tarActs,o=i.get(e);if(o)if(2==o.state)o.actions=[t],o.state=r?1:0;else{var a=o.actions;a.indexOf(t)<0&&a.push(t)}else o={actions:[t],tar:e,state:r?1:0},i.set(e,o);if(t.start(e),n){var a=this._tagActs.get(n);a||(a=[],this._tagActs.set(n,a)),a.push(t)}},t.prototype.rmvAction=function(t){var e=t.getTar();if(e){t.stop();var r=this._tarActs.get(e);if(r){var n=r.actions,i=n.indexOf(t);i>=0&&n.splice(i,1),0==n.length&&(r.state=2)}}},t.prototype.rmvActsByTar=function(t){var e=this._tarActs.get(t);e&&(e.state=2)},t.prototype.rmvActsByTag=function(t){var e=this._tagActs.get(t);if(e){for(var r=0,n=e.length;n>r;++r)e[r].stop();this._tagActs["delete"](t)}},t.prototype.rmvAllActs=function(){for(var t=this._tarActs.values,e=0,r=t.length;r>e;++e)t[e].state=2},t.prototype.pauseTar=function(t){var e=this._tarActs.get(t);e&&2!=e.state&&(e.state=1)},t.prototype.resumeTar=function(t){var e=this._tarActs.get(t);e&&2!=e.state&&(e.state=0)},t.prototype.pauseAll=function(){for(var t=this._tarActs.values,e=0,r=t.length;r>e;++e){var n=t[e];2!=n.state&&(n.state=1)}},t.prototype.advanceTime=function(t){var e=this,r=e._tarActs;if(!(r.size<=0)){for(var n=[],i=r.values,o=0,a=i.length;a>o;++o){var s=i[o];switch(s.state){case 0:e.updateAction(s,t);break;case 2:n.push(s.tar)}}if(n.length>0)for(o=0,a=n.length;a>o;++o)r["delete"](n[o])}},t.prototype.updateAction=function(t,e){for(var r=t.actions,n=r.length-1;n>=0;--n){var i=r[n];i.getTar()?(i.step(e),i.isDone()&&(i.stop(),r.splice(n,1))):r.splice(n,1)}0==r.length&&(t.state=2)},t}();t.ActionManager=e,__reflect(e.prototype,"TRain.ActionManager"),t.actionMgr=new e}(TRain||(TRain={}));var CONF;!function(t){t.resHome="resource/",t.sheetUrl="sheets/",t.fontUrl="fonts/",t.mcUrl="mcs/",t.soundUrl="sound/",t.imgUrl="imgs/",t.mcGCTm=1e4,t.verFile=""}(CONF||(CONF={}));var cui;!function(t){var e=function(e){function r(){var t=e.call(this)||this,r=t;return r.$BC=[0/0,0/0,0/0,0/0,0/0,0/0,0/0,0/0,!1],r.tag=-1,r._invalidProps=0,t}return __extends(r,e),r.prototype.dispose=function(){this._disposed=!0},r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r);var n=this;n._invalidProps>0&&n.validateProps()},r.prototype.$setWidth=function(t){var r=e.prototype.$setWidth.call(this,t);return r&&this.invalidateProps(2),r},r.prototype.$setHeight=function(t){var r=e.prototype.$setHeight.call(this,t);return r&&this.invalidateProps(2),r},Object.defineProperty(r.prototype,"txtKey",{set:function(t){var e=TRain.langMgr.getTxtByKey(t);e&&(this.text=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"txtFlowKey",{set:function(e){var r=TRain.langMgr.getTxtByKey(e);r&&(this.textFlow=t.htmlParser.parser(r))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterNm",{get:function(){return this.$BC[12]},set:function(e){this.$BC[12]=e,this.filters=e&&e.length>0?t.uiMgr.getFilters(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.$BC[0]},set:function(t){t=+t;var e=this.$BC;e[0]!==t&&(e[0]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$BC[2]},set:function(t){t=+t;var e=this.$BC;e[2]!==t&&(e[2]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$BC[1]},set:function(t){t=+t;var e=this.$BC;e[1]!==t&&(e[1]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$BC[3]},set:function(t){t=+t;var e=this.$BC;e[3]!=t&&(e[3]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hCenter",{get:function(){return this.$BC[4]},set:function(t){t=+t;var e=this.$BC;e[4]!==t&&(e[4]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vCenter",{get:function(){return this.$BC[5]},set:function(t){t=+t;var e=this.$BC;e[5]!==t&&(e[5]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perWidth",{get:function(){return this.$BC[6]},set:function(t){t=+t;var e=this.$BC;e[6]!==t&&(e[6]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perHeight",{get:function(){return this.$BC[7]},set:function(t){t=+t;var e=this.$BC;e[7]!==t&&(e[7]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPLayout",{get:function(){return this.$BC[8]},enumerable:!0,configurable:!0}),r.prototype.setNeedPLayout=function(){var t=this,e=t.$BC,r=t.$parent;e[8]||(e[8]=!0,r&&r.openLayout()),r&&r.invalidateDL()},r.prototype.invalidateProps=function(e){var r=this;r.$stage&&!r._invalidPropsFlag&&(r._invalidPropsFlag=!0,t.uiMgr.invalidateProperty(r)),r._invalidProps|=e},r.prototype.validateProps=function(){var t=this,e=t._invalidProps;if(0!=e){var r=t.$BC;r[8]&&t.$parent&&""!=t.$TextField[13]&&t.$parent.invalidateDL(),t._invalidProps=0,t._invalidPropsFlag=!1}},r}(egret.TextField);t.Label=e,__reflect(e.prototype,"cui.Label",["cui.IBaseCtrl","cui.ILayout","egret.DisplayObject"])}(cui||(cui={}));var cui;!function(t){var e=function(){function t(){var t=this;t.skinParts=[],t.elementsContent=[]}return Object.defineProperty(t.prototype,"hostComponent",{get:function(){return this._host},set:function(t){var e=this;if(e._host!=t&&(e._host=t,t)){var r=e.x;r&&(t.x=r),r=e.y,r&&(t.y=r),r=e.width,r&&isNaN(t.$getExplicitWidth())&&(t.width=r),r=e.height,r&&isNaN(t.$getExplicitHeight())&&(t.height=r)}},enumerable:!0,configurable:!0}),t.prototype.hasStates=function(){return!!this.states},t.prototype.applyState=function(t){var e=this,r=e.states[t];if(r)for(var n=e._host,i=0,o=r.length;o>i;++i){var a=r[i],s=a.ctrl;""==s?n[a.prop]=a.val:e[s][a.prop]=a.val}},t}();t.Skin=e,__reflect(e.prototype,"cui.Skin")}(cui||(cui={}));var cui;!function(t){var e=function(e){function r(t){var r=e.call(this)||this;return r._src=t||[],r}return __extends(r,e),Object.defineProperty(r.prototype,"source",{get:function(){return this._src},set:function(e){this._src=e,t.CollectionEvent.dispatchCoEvent(this,"reset")},enumerable:!0,configurable:!0}),r.prototype.refresh=function(){t.CollectionEvent.dispatchCoEvent(this,"refresh")},Object.defineProperty(r.prototype,"length",{get:function(){return this._src.length},enumerable:!0,configurable:!0}),r.prototype.addItem=function(e){var r=this,n=r._src;n.push(e),t.CollectionEvent.dispatchCoEvent(r,"add",n.length-1,e)},r.prototype.addItemAt=function(e,r){var n=this,i=n._src;i.splice(r,0,e),t.CollectionEvent.dispatchCoEvent(n,"add",r,e)},r.prototype.getItemAt=function(t){return this._src[t]},r.prototype.getItemIndex=function(t){return this._src.indexOf(t)},r.prototype.itemUpdated=function(e){var r=this,n=r._src.indexOf(e);-1!=n&&t.CollectionEvent.dispatchCoEvent(r,"update",n,e)},r.prototype.updateItemAt=function(e){var r=this,n=r._src;e>=0&&e<n.length&&t.CollectionEvent.dispatchCoEvent(r,"update",e,n[e])},r.prototype.updateItemAts=function(e){t.CollectionEvent.dispatchCoEvent(this,"upidxs",0,e)},r.prototype.removeAll=function(){var e=this;e._src.length=0,t.CollectionEvent.dispatchCoEvent(e,"removeAll")},r.prototype.removeItem=function(e){var r=this,n=r._src,i=n.indexOf(e);n.splice(i,1),t.CollectionEvent.dispatchCoEvent(r,"remove",i,e)},r.prototype.removeItemAt=function(e){var r=this,n=r._src,i=n.splice(e,1)[0];return t.CollectionEvent.dispatchCoEvent(r,"remove",e,i),i},r.prototype.replaceItemAt=function(e,r){var n=this,i=n._src,o=i.splice(r,1,e)[0];return t.CollectionEvent.dispatchCoEvent(n,"replace",r,e,o),o},r}(egret.EventDispatcher);t.ArrayCollection=e,__reflect(e.prototype,"cui.ArrayCollection",["cui.ICollection","egret.IEventDispatcher"])}(cui||(cui={}));var TRain;!function(t){var e=function(){function e(){var t=this;t._timeScale=1,t._uid=0,t._delayDos=[],t._freeDelayObjs=[],t._frameDos=[],t._nextDos=[]}return e.prototype.init=function(e){var r=this,n=egret.lifecycle.contexts[0];n.onUpdate=function(){return r.update()},window.removeEventListener("focus",n.resume,!1),window.removeEventListener("blur",n.pause,!1),r.stage=e,e.addEventListener(egret.Event.ACTIVATE,e.invalidate,e),r._lastTime=egret.getTimer(),cui.uiMgr.initState(e),t.soundMgr=new t.SoundManager},e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.addNextDo=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._nextDos.push({doFun:t,thisObj:e,args:r})},e.prototype.addDelayDo=function(t,e,r,n,i){for(var o=[],a=5;a<arguments.length;a++)o[a-5]=arguments[a];n=n||0,i=!!i;var s,u=this,l=u._delayDos,c=++u._uid,p=this._freeDelayObjs;return p.length>0?(s=p.pop(),s.flag=n,s.doFun=t,s.thisObj=e,s.delay=r,s.canScale=i,s.args=o,s.uuid=c):s={flag:n,doFun:t,thisObj:e,delay:r,canScale:i,args:o,uuid:c},l.unshift(s),c},e.prototype.freeDelayObj=function(t){var e=this._freeDelayObjs;e.length<30&&(t.doFun=null,t.thisObj=null,t.args=null,e.push(t))},e.prototype.rmvDelayDo=function(t,e){var r=this._delayDos,n=r.length;if(!(0>=n))for(var i=n-1;i>=0;--i){var o=r[i];if(o.thisObj==e&&o.doFun==t){o.thisObj=null,o.doFun=null;break}}},e.prototype.rmvAllDelayDo=function(t){var e=this._delayDos,r=e.length;if(!(0>=r))for(var n=r-1;n>=0;--n){var i=e[n];i.thisObj==t&&(i.thisObj=null,i.doFun=null)}},e.prototype.rmvDelayDoByFlag=function(t){var e=this._delayDos,r=e.length;if(!(0>=r)){t=t||0;for(var n=r-1;n>=0;--n){var i=e[n];i.flag==t&&(i.thisObj=null,i.doFun=null)}}},e.prototype.rmvDelayDoByID=function(t){var e=this._delayDos,r=e.length;if(!(0>=r))for(var n=r-1;n>=0;--n){var i=e[n];if(i.uuid==t){i.thisObj=null,i.doFun=null;break}}},e.prototype.adjustDelayTmByID=function(t,e){var r=this._delayDos,n=r.length;if(!(0>=n))for(var i=n-1;i>=0;--i){var o=r[i];if(o.uuid==t){o.delay=e;break}}},e.prototype.addFrameDo=function(t,e,r,n){r=!!r;var i=this,o=i._frameDos,a=++i._uid,s={doFun:t,thisObj:e,canScale:r,uuid:a};return n&&n>35&&(s.interval=n,s.lostTm=0),o.push(s),a},e.prototype.rmvAllFrameDo=function(){this._frameDos=[]},e.prototype.rmvFrameDoById=function(t){var e=this._frameDos,r=e.length;if(!(0>=r))for(var n=r-1;n>=0;--n){var i=e[n];if(i.uuid==t){i.doFun=null,i.thisObj=null;break}}},e.prototype.rmvFrameDo=function(t,e){var r=this._frameDos,n=r.length;if(!(0>=n)){var i,o=n-1;if(e){for(;o>=0;--o)if(i=r[o],i.thisObj==t&&i.doFun==e){i.doFun=null,i.thisObj=null;break}}else for(;o>=0;--o)i=r[o],i.thisObj==t&&(i.doFun=null,i.thisObj=null)}},e.prototype.update=function(){var t=this,e=egret.getTimer(),r=e-t._lastTime,n=Math.floor(r*t._timeScale);t._lastTime=e;var i,o=t._nextDos,a=o.length;if(a>0)for(t._nextDos=[],i=0;a>i;++i){var s=o[i];s.doFun.apply(s.thisObj,s.args)}var u=t._delayDos;if(a=u.length,a>0)for(i=a-1;i>=0;--i){var l=u[i];l.doFun?(l.delay-=l.canScale?n:r,l.delay<=0&&(u.splice(i,1),l.doFun.apply(l.thisObj,l.args),t.freeDelayObj(l))):(u.splice(i,1),t.freeDelayObj(l))}var c=t._frameDos;if(a=c.length,a>0)for(i=a-1;i>=0;--i){var p=c[i];if(p.doFun){var h=p.canScale?n:r,d=p.interval;if(d){var f=p.lostTm+h;p.lostTm=f,f>=d&&(p.lostTm=f%d,p.doFun.call(p.thisObj,f))}else p.doFun.call(p.thisObj,h)}else c.splice(i,1)}},e}();t.Core=e,__reflect(e.prototype,"TRain.Core"),t.core=new e}(TRain||(TRain={}));var cui;!function(t){var e=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return __extends(e,t),e.prototype.clean=function(){t.prototype.clean.call(this),this.item=this.oldItem=null},e.prototype.initTo=function(t,e,r,n){this.kind=t,this.location=0|+e,this.item=r,this.oldItem=n},e.dispatchCoEvent=function(t,r,n,i,o){if(!t.hasEventListener("collect_ch"))return!0;var a=egret.Event.create(e,"collect_ch");a.initTo(r,n,i,o);var s=t.dispatchEvent(a);return egret.Event.release(a),s},e}(egret.Event);t.CollectionEvent=e,__reflect(e.prototype,"cui.CollectionEvent")}(cui||(cui={}));var cui;!function(t){var e=function(){function t(){this._queues=[]}return t.prototype.insert=function(t){for(var e,r=this,n=t.nestLevel,i=r._queues,o=0,a=i.length;a>o;++o){var s=i[o],u=s.depth;if(u==n){e=s;break}if(u>n)break}e||(e={items:[],depth:n},i.splice(o,0,e)),e.items.push(t)},t.prototype.forEachItemDo=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=this._queues,i=n.length-1;i>=0;--i)for(var o=n[i].items,a=0,s=o.length;s>a;++a){var u=o[a];u[t].apply(u,e)}},t.prototype.hasItem=function(){return this._queues.length>0},t}();__reflect(e.prototype,"DepthQueue");var r=function(){function t(){var t=this;t._filters={},t._invalidDL=new e,t._invalidProps=[]}return t.prototype.initState=function(t){var e=this;t.addEventListener(egret.Event.ENTER_FRAME,e.update,e),t.addEventListener(egret.Event.RENDER,e.update,e)},t.prototype.invalidateDL=function(t){this._invalidDL.insert(t)},t.prototype.invalidateProperty=function(t){this._invalidProps.push(t)},t.prototype.createFilters=function(t){var e=this._filters;for(var r in t){var n=t[r],i=[];e[r]=i;for(var o=0,a=n.length;a>o;++o){var s=n[o],u=null;switch(s.tp){case 1:u=new egret.GlowFilter(s.c,s.a,s.bx,s.by,s.s,s.q,s.i,s.k);break;case 2:u=new egret.ColorMatrixFilter(s.m);break;case 3:u=new egret.DropShadowFilter(s.d,s.an,s.c,s.a,s.bx,s.by,s.s,s.q,s.i,s.k)}u&&i.push(u)}}},t.prototype.getFilters=function(t){return this._filters[t]},t.prototype.update=function(t){var r=this,n=r._invalidProps,i=n.length;if(i>0){r._invalidProps=new Array;for(var o=0;i>o;++o)n[o].validateProps()}var a=r._invalidDL;a.hasItem()&&(r._invalidDL=new e,a.forEachItemDo("validateDL"))},t}();t.UIManager=r,__reflect(r.prototype,"cui.UIManager"),t.uiMgr=new t.UIManager}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.keepSelect=!1,e.activeCheckEnable=!0;var r=e;return r._items=[],r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouchBegin,r),e}return __extends(e,t),e.prototype.dispose=function(){var e=this;e.onTouchFinish(),e._cb=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"selectItem",{get:function(){return this._selection},set:function(t){var e=this;e.keepSelect&&e._selection!=t&&(e.setSelectItem(t),t&&e.activate(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectTag",{get:function(){var t=this;return t._selection?t._selection.tag:-1},set:function(t){var e=this;if(e.keepSelect&&(!e._selection||e._selection.tag!==t)){var r=e.getChildByTag(t);r&&(e.setSelectItem(r),e.activate(r))}},enumerable:!0,configurable:!0}),e.prototype.setSelectItem=function(t){var e=this;e._selection&&(e._selection.selected=!1),e._selection=t,e._selection&&(e._selection.selected=!0)},Object.defineProperty(e.prototype,"numItems",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),e.prototype.getMenuItemAt=function(t){var e=this;return t>=0&&t<e.numItems?e._items[t]:null},e.prototype.getChildByTag=function(t){for(var e,r=this,n=r._items,i=0,o=n.length;o>i;++i)if(e=n[i],e.tag===t)return e;return null},e.prototype.getItemIndex=function(t){return this._items.indexOf(t)},e.prototype.setTarget=function(t,e){this._cb={fun:t,tar:e}},e.prototype.activate=function(t){var e=this._cb;e&&e.fun.call(e.tar,t)},e.prototype.$childAdded=function(e,n){t.prototype.$childAdded.call(this,e,n);var i=this;e instanceof r&&i._items.push(e)},e.prototype.$childRemoved=function(e,n){t.prototype.$childRemoved.call(this,e,n);var i=this;if(e instanceof r){var o=e;o==i._selection&&(i._selection=null);var a=i._items;a.splice(a.indexOf(e),1)}},e.prototype.$hitTest=function(t,e){var r=this;if(!r.touchEnabled||!r.visible)return null;var n=r.globalToLocal(t,e,egret.$TempPoint),i=egret.$TempRectangle.setTo(0,0,r.width,r.height),o=r.$scrollRect;return o&&(i.x=o.x,i.y=o.y),i.contains(n.x,n.y)?r:null},e.prototype.onTouchBegin=function(t){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e);var r=e.$stage;r.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchFinish,e),r.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.onTouchMove,e),e._tempStage=r,e._highLightItem=e._itemForTouch(t.localX,t.localY),e._highLightItem&&(e._highLightItem.selected=!0,t.updateAfterEvent())},e.prototype.onTouchMove=function(t){var e=this,r=e.globalToLocal(t.stageX,t.stageY,egret.$TempPoint),n=e._itemForTouch(r.x,r.y);e._highLightItem!=n&&(e._highLightItem&&(e.keepSelect&&e._highLightItem==e._selection||(e._highLightItem.selected=!1)),e._highLightItem=n,e._highLightItem&&(e._highLightItem.selected=!0),t.updateAfterEvent()),t.stopPropagation()},e.prototype.onTouchEnd=function(t){var e=this;e.onTouchFinish();var r=e._highLightItem;r&&(e._highLightItem=null,e.keepSelect?r!=e._selection&&e.setSelectItem(r):r.selected=!1,r.onItemTap(),e.activate(r),t.preventDefault())},e.prototype.onTouchFinish=function(){var t=this,e=t._tempStage;e&&(e.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchFinish,t),e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,t),t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t._tempStage=null)},e.prototype._itemForTouch=function(t,e){var r=this._items;if(r.length>0){var n=r.length-1,i=void 0;if(this.activeCheckEnable){for(;n>=0;--n)if(i=r[n],i.visible&&i.enabled&&i.ptInRange(t,e))return i}else for(;n>=0;--n)if(i=r[n],i.visible&&i.ptInRange(t,e))return i}return null},e}(t.Group);t.MenuGroup=e,__reflect(e.prototype,"cui.MenuGroup");var r=function(t){function e(){var e=t.call(this)||this,r=e;return r._isSel=!1,r._enabled=!0,r.touchEnabled=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._isSel},set:function(t){this._isSel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),e.prototype.onItemTap=function(){var t=this;t.enabled&&TRain.soundMgr.playSFX(t._sound)},e.prototype.ptInRange=function(t,e){var r=this,n=r.x-r.anchorOffsetX,i=r.y-r.anchorOffsetY;return t>n&&t<n+r.width&&e>i&&e<i+r.height},e}(t.Component);t.MenuItem=r,__reflect(r.prototype,"cui.MenuItem");
var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){var e=this;e._label=t;var r=e.skLabel;r&&(r.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"txtKey",{get:function(){return this._txtKey},set:function(t){var e=this;e._txtKey=t;var r=e.skLabel;r&&(r.txtKey=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){var e=this;e._icon=t;var r=e.skIcon;r&&(r.source=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._isSel},set:function(t){var e=this;e._isSel!=t&&(e._isSel=t,e.invalidateProps(4))},enumerable:!0,configurable:!0}),e.prototype.getState=function(){var t=this;return t.enabled?t._isSel?"down":"up":"disabled"},e.prototype.onPartAdded=function(){var t=this,e=t.skIcon,r=t._icon;r&&e&&(e.source=r);var n=t.skLabel;if(n){var i=t._label;if(i)n.text=i;else{var o=t._txtKey;o&&(n.txtKey=o)}}},e}(r);t.MenuItemImage=n,__reflect(n.prototype,"cui.MenuItemImage")}(cui||(cui={}));var cui;!function(t){var e=function(e){function r(){var r=e.call(this)||this,n=r;return n._dir="ltr",n._ani=new t.Animation(n.aniUpdateHandler,n),n._aniVal=0,r}return __extends(r,e),r.prototype.dispose=function(){this._valToLabel=null,e.prototype.dispose.call(this)},r.prototype.childrenCreated=function(){this._inited=!0,this.update()},Object.defineProperty(r.prototype,"labelFunction",{set:function(t){this._valToLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"direction",{get:function(){return this._dir},set:function(t){var e=this;e._dir!=t&&(e._dir=t,e._inited&&e.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"thumb",{get:function(){return this._thumb},set:function(t){var e=this;e._thumb=t,t&&(e._thumbPos={x:t.x,y:t.y})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this._val||0},set:function(t){0>t?t=0:t>1&&(t=1);var e=this;e._ani.isPlaying&&e._ani.stop(),e.setCurValue(t)},enumerable:!0,configurable:!0}),r.prototype.setProgressValue=function(t,e){0>t?t=0:t>1&&(t=1);var r=this;r.openAni&&e>0?r.startAni(t,e):(r._ani.isPlaying&&r._ani.stop(),r.setCurValue(t))},r.prototype.startAni=function(t,e){var r=this,n=r._ani;n.stop(),n.duration=e,n.from=r.value,n.to=t,n.play()},r.prototype.aniUpdateHandler=function(t){this.setCurValue(t.currentValue)},r.prototype.setCurValue=function(t){var e=this;e._val!=t&&(e._val=t,e.update())},r.prototype.update=function(){var t=this,e=t.value,r=t._thumb;if(r){var n=r.width,i=r.height,o=Math.round(e*n);(0>o||o===1/0)&&(o=0);var a=Math.round(e*i);(0>a||a===1/0)&&(a=0);var s=r.$scrollRect;switch(s||(s=egret.$TempRectangle),s.setTo(0,0,n,i),t._dir){case"ltr":s.width=o;break;case"rtl":s.width=o,s.x=n-o,r.x=t._thumbPos.x+s.x;break;case"ttb":s.height=a;break;case"btt":s.height=a,s.y=i-a,r.y=t._thumbPos.y+s.y}r.scrollRect=s}t.updateLabel(e)},r.prototype.updateLabel=function(t){var e=this,r=String(t);e._valToLabel&&(r=e._valToLabel(t));var n=e.skLabel;n&&(n.text=r)},r}(t.Component);t.ProgressBar=e,__reflect(e.prototype,"cui.ProgressBar")}(cui||(cui={}));var TRain;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.update=function(t){t>=1&&this["do"]()},e.prototype["do"]=function(){},e}(t.Action);t.ActionDo=e,__reflect(e.prototype,"TRain.ActionDo");var r=function(t){function e(e,r){var n=t.call(this,e)||this;return n._props=r,n}return __extends(e,t),e.prototype.setProps=function(t){this._props=t},e.prototype.addProp=function(t,e){var r=this._props;r||(r={},this._props=r),r[t]=e},e.prototype["do"]=function(){var t=this._tar,e=this._props;for(var r in e)t[r]=e[r]},e}(e);t.ActionPropDo=r,__reflect(r.prototype,"TRain.ActionPropDo");var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.once=!0,e}return __extends(e,t),e.prototype.setCall=function(t,e){this._cb={fun:t,tar:e}},e.prototype.clear=function(){var t=this;t._tar=null,t._cb=null},e.prototype.stop=function(){var t=this;t._tar=null,t.once&&(t._cb=null)},e.prototype.stopToEnd=function(){var t=this;t._tar&&(t["do"](),t._tar=null)},e.prototype["do"]=function(){var t=this,e=t._cb;e&&(e.fun.call(e.tar,t._tar),t.once&&(t._cb=null))},e}(e);t.ActionCallDo=n,__reflect(n.prototype,"TRain.ActionCallDo")}(TRain||(TRain={}));var cui;!function(t){var e=function(e){function r(){var t=e.call(this)||this;t._bounces=!0;var r=t;return r.$Scroller=["auto","auto",!1,!1,{x:0,y:0},!1,null,null,1,null,null],r._bounces=!0,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouchBegin,r),t}return __extends(r,e),r.prototype.dispose=function(){var t=this;t.clearEvent();var r=t.$Scroller;r[9]=null;var n=r[6];n&&(n.dispose(),r[6]=null),n=r[7],n&&(n.dispose(),r[7]=null);var i=t._hAnimation;i&&(i.stop(),i.updateFunction=null),i=t._vAnimation,i&&(i.stop(),i.updateFunction=null),e.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"bounces",{get:function(){return this._bounces},set:function(t){var e=this;this._bounces=t;var r=e.$Scroller[6];r&&(r.$bounces=t);var n=e.$Scroller[7];n&&(n.$bounces=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollPolicyV",{get:function(){return this.$Scroller[0]},set:function(t){var e=this,r=e.$Scroller;r[0]!=t&&(r[0]=t,e.checkScrollPolicy())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollPolicyH",{get:function(){return this.$Scroller[1]},set:function(t){var e=this,r=e.$Scroller;r[1]!=t&&(r[1]=t,e.checkScrollPolicy())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"throwSpeed",{get:function(){var t=this.$Scroller[6];return t?t.$scrollFactor:0},set:function(t){t=+t,t=.01>t?.01:t;var e=this;this.$Scroller[8]=t;var r=e.$Scroller[6];r&&(r.$scrollFactor=t),r=e.$Scroller[7],r&&(r.$scrollFactor=t)},enumerable:!0,configurable:!0}),r.prototype.setScrollTop=function(t,e){var r=this.$Scroller;if(r[9]){var n=r[10];n||(n={},r[10]=n),n.top={v:t,d:e},this.invalidateDL()}},r.prototype.setScrollLeft=function(t,e){var r=this.$Scroller;if(r[9]){var n=r[10];n||(n={},r[10]=n),n.left={v:t,d:e},this.invalidateDL()}},r.prototype.doScrollTo=function(){var e=this,r=e.$Scroller,n=r[10];if(n&&(r[10]=null,e.checkScrollPolicy())){var i=r[9];if(i){var o=n.top;if(o&&r[3]&&i.contentHeight>i.height){var a=o.v,s=i.contentHeight-i.height;if(a>s&&(a=s),i.scrollV!=a){var u=e.getTouchScrollV();if(u.isStarted())return;var l=e._vAnimation;if(!l){var c=function(t){e.verticalUpdateHandler(t.currentValue)};l=new t.Animation(c,e),e._vAnimation=l}l.stop();var p=o.d||0;p>0?(l.duration=p,l.from=i.scrollV,l.to=a,l.play()):i.scrollV=a}}var h=n.left;if(h&&r[2]&&i.contentWidth>i.width){var d=h.v,s=i.contentWidth-i.width;if(d>s&&(d=s),i.scrollH!=d){var u=e.getTouchScrollH();if(u.isStarted())return;var l=e._hAnimation;if(!l){var c=function(t){e.horizontalUpdateHandler(t.currentValue)};l=new t.Animation(c,e),e._hAnimation=l}l.stop();var p=h.d||0;p>0?(l.duration=p,l.from=i.scrollH,l.to=d,l.play()):i.scrollH=d}}}}},r.prototype.getTouchScrollV=function(){var e=this.$Scroller,r=e[7];if(!r){var n=this;r=new t.TouchScroll(n.verticalUpdateHandler,n.verticalEndHanlder,n),r.stop(),e[7]=r,r.$scrollFactor=e[8]}return r},r.prototype.getTouchScrollH=function(){var e=this.$Scroller,r=e[6];if(!r){var n=this;r=new t.TouchScroll(n.horizontalUpdateHandler,n.horizontalEndHandler,n),r.stop(),e[6]=r,r.$scrollFactor=e[8]}return r},Object.defineProperty(r.prototype,"viewport",{get:function(){return this.$Scroller[9]},set:function(t){var e=this,r=e.$Scroller;if(t!=r[9]){var n=r[9];n&&e.uninstallViewport(),t&&e.installViewport(t)}},enumerable:!0,configurable:!0}),r.prototype.installViewport=function(t){var e=this;t.scrollEnabled=!0,e.$Scroller[9]=t,e.addChild(t),t.addEventListener("view_clear",e.onViewClear,e)},r.prototype.uninstallViewport=function(){var t=this,e=t.$Scroller,r=e[6];r&&r.stop(),r=e[7],r&&r.stop();var n=e[9];n.scrollEnabled=!1,e[9]=null,t.removeChild(n)},r.prototype.onViewClear=function(){var t=this,e=t.$Scroller,r=e[6];r&&r.stop(),r=e[7],r&&r.stop();var n=t._hAnimation;n&&n.stop(),n=t._vAnimation,n&&n.stop()},r.prototype.validateDL=function(){this.doScrollTo(),e.prototype.validateDL.call(this)},r.prototype.checkScrollPolicy=function(){var t=this.$Scroller,e=t[9];if(!e)return!1;var r=!1;switch(t[1]){case"auto":r=e.contentWidth>e.width;break;case"on":r=!0}t[2]=r;var n=!1;switch(t[0]){case"auto":n=e.contentHeight>e.height;break;case"on":n=!0}return t[3]=n,r||n},r.prototype.onTouchBegin=function(t){var e=this;if(e.checkScrollPolicy()){var r=e.$Scroller,n=r[6];n&&n.stop(),n=r[7],n&&n.stop();var i=t.$stageX,o=t.$stageY,a=e.$Scroller[4];a.x=i,a.y=o;var s=e.$stage;e._tempStage=s,s.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.onTouchMove,e),s.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchFinish,e),e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchCaptureEnd,e,!0),e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchFinish,e)}},r.prototype.onTouchMove=function(t){t.stopImmediatePropagation();var e=this,n=t.$stageX,i=t.$stageY,o=e.$Scroller;if(!o[5]){var a=o[4];if(Math.abs(a.x-n)<r.scrollThreshold&&Math.abs(a.y-i)<r.scrollThreshold)return;o[5]=!0,e.moveStart(a.x,a.y)}e.moveUpdate(n,i)},r.prototype.onTouchCaptureEnd=function(t){var e=this;if(t.isDefaultPrevented())return void e.onTouchFinish(t);var r=e.$Scroller[5];r&&(t.preventDefault(),e.onTouchFinish(t))},r.prototype.onTouchFinish=function(t){var e=this;e.clearEvent();var r=e.$Scroller;r[5]&&(e.moveEnd(t.stageX,t.stageY),r[5]=!1)},r.prototype.clearEvent=function(){var t=this,e=t._tempStage;e&&(t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchCaptureEnd,t,!0),t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchFinish,t),e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,t),e.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchFinish,t),t._tempStage=null)},r.prototype.moveStart=function(t,e){var r=this,n=r._hAnimation;n&&n.stop(),n=r._vAnimation,n&&n.stop();var i,o=r.$Scroller,a=o[9];a.$UIComponent;o[2]&&(i=r.getTouchScrollH(),i.stop(),i.start(t)),o[3]&&(i=r.getTouchScrollV(),i.stop(),i.start(e))},r.prototype.moveUpdate=function(t,e){var r,n=this,i=n.$Scroller,o=i[9];i[2]&&(r=n.getTouchScrollH(),r.isStarted()&&r.update(t,o.contentWidth-o.width,o.scrollH)),i[3]&&(r=n.getTouchScrollV(),r.isStarted()&&r.update(e,o.contentHeight-o.height,o.scrollV))},r.prototype.moveEnd=function(t,e){var r,n=this,i=n.$Scroller,o=i[9];i[2]&&(r=n.getTouchScrollH(),r.isStarted()&&r.finish(o.scrollH,o.contentWidth-o.width)),i[3]&&(r=n.getTouchScrollV(),r.isStarted()&&r.finish(o.scrollV,o.contentHeight-o.height))},r.prototype.horizontalUpdateHandler=function(t){this.$Scroller[9].scrollH=t},r.prototype.verticalUpdateHandler=function(t){this.$Scroller[9].scrollV=t},r.prototype.horizontalEndHandler=function(){},r.prototype.verticalEndHanlder=function(){},r.scrollThreshold=5,r}(t.Group);t.Scroller=e,__reflect(e.prototype,"cui.Scroller")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this,r=e;return r._states={},r._curState=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"stateStr",{set:function(t){for(var e,r=this,n=t.split(","),i=r._states,o=0;o<n.length;++o)e=n[o].split(":"),2==e.length&&(i[e[0]]=e[1]);var a=r._curState;a&&(r.source=i[a])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curState",{set:function(t){var e=this;e._curState!=t&&(e._curState=t,e.source=e._states[t])},enumerable:!0,configurable:!0}),e.prototype.addState=function(t,e){this._states[t]=e},e}(t.Image);t.StateImage=e,__reflect(e.prototype,"cui.StateImage")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.activeInView=!1,e.canOutBound=!0,e.repeatClk=!1;var r=e;return r.$TableScroller=["auto","auto",!1,!1,{x:0,y:0},{x:0,y:0},!1,null,null,null],r._lastActiveIdx=-1,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouchBegin,r),e}return __extends(e,t),Object.defineProperty(e.prototype,"scrollPolicyV",{get:function(){return this.$TableScroller[0]},set:function(t){var e=this.$TableScroller;e[0]!=t&&(e[0]=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollPolicyH",{get:function(){return this.$TableScroller[1]},set:function(t){var e=this.$TableScroller;e[1]!=t&&(e[1]=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this.$TableScroller[9]},set:function(t){var e=this,r=e.$TableScroller;if(t!=r[9]){var n=r[9];n&&e.uninstallViewport(),t&&e.installViewport(t)}},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;e._cb=null,e.clearEvent(),TRain.actionMgr.rmvActsByTar(e),t.prototype.dispose.call(this)},e.prototype.installViewport=function(t){var e=this;t.scrollEnabled=!0,e.$TableScroller[9]=t,e.addChild(t),t.addEventListener("view_clear",e.onViewClear,e)},e.prototype.uninstallViewport=function(){var t=this;t._showInfo=null;var e=t.$TableScroller,r=e[9],n=e[7];n&&TRain.actionMgr.rmvAction(n);var i=e[8];i&&TRain.actionMgr.rmvAction(i),r.scrollEnabled=!1,e[9]=null,t.removeChild(r)},e.prototype.onViewClear=function(){var t=this.$TableScroller,e=t[7];e&&e.stop(),e=t[8],e&&e.stop()},e.prototype.showTableInViewStart=function(t,e){var r=this;r._showInfo={idx:t,ani:e},r.invalidateDL()},e.prototype._showTable=function(t,e){var r=this;if(r.checkScrollPolicy()){var n=r.viewport,i=n.getElementRect(t);if(i){var o,a,s,u=r.$TableScroller[2];if(u){a=i.x,s=n.scrollH;var l=n.width;if(s>a||a+i.w>s+l){var c=n.contentWidth;c>l&&a+l>c&&(a=c-l),e?(o=r.getAnimationDuration(.5,s,a),r.setScrollLeft(a,o)):n.scrollH=a}}else{a=i.y,s=n.scrollV;var p=n.height;if(s>a||a+i.h>s+p){var h=n.contentHeight;h>p&&a+p>h&&(a=h-p),e?(o=r.getAnimationDuration(.5,s,a),r.setScrollTop(a,o)):n.scrollV=a}}r.activeInView&&r.activate(t)}}},e.prototype.activate=function(t){var e=this,r=e._cb;return!e.repeatClk&&e._lastActiveIdx==t||!r?!1:(e._lastActiveIdx=t,r.fun.call(r.tar,t),!0)},e.prototype.setTarget=function(t,e){this._cb={fun:t,tar:e}},e.prototype.checkScrollPolicy=function(){var t=this,e=t.viewport;if(!e)return!1;var r=t.$TableScroller,n=!1;switch(r[1]){case"auto":n=e.contentWidth>e.width;break;case"on":n=!0}r[2]=n;var i=!1;if(!n){switch(r[0]){case"auto":i=e.contentHeight>e.height;break;case"on":i=!0}r[3]=i}return n||i},e.prototype.onTouchBegin=function(t){var e=this;if(e.checkScrollPolicy()){var r=t.$stageX,n=t.$stageY,i=e.$TableScroller[4];i.x=r,i.y=n;var o=e.$stage;o.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.onTouchMove,e),o.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchFinish,e),e._tempStage=o,e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchCaptureEnd,e,!0);var a=e.$TableScroller[5];a.x=r,a.y=n}},e.prototype.onTouchMove=function(t){var r=this;t.stopPropagation();var n=r.viewport,i=n.globalToLocal(t.$stageX,t.$stageY,egret.$TempPoint);if(i.x-=n.scrollH,i.y-=n.scrollV,!(i.x<0||i.y<0||i.x>n.width||i.y>n.height)){var o=t.$stageX,a=t.$stageY,s=r.$TableScroller;if(!r.canOutBound){var u=void 0,l=void 0;if(s[2]){if(u=r.$TableScroller[5],l=t.$stageX-u.x,l>=0&&n.scrollH<=0)return;if(0>=l){var c=n.contentWidth-n.width;if(n.scrollH>=c)return}}else if(s[3]){if(l=t.$stageY-u.y,l>=0&&n.scrollV<=0)return;if(0>=l){var p=n.contentHeight-n.height;if(n.scrollV>=p)return}}}if(!s[6]){var h=s[4];if(Math.abs(h.x-o)<e.scrollThreshold&&Math.abs(h.y-a)<e.scrollThreshold)return;s[6]=!0,r.moveStart()}r.moveUpdate(o,a)}},e.prototype.onTouchCaptureEnd=function(t){var e=this;if(t.isDefaultPrevented())return void e.onTouchFinish(t);var r=e.$TableScroller[6];r&&(t.preventDefault(),e.onTouchFinish(t))},e.prototype.onTouchEnd=function(t){var e=this;if(t.isDefaultPrevented())return void e.onTouchFinish(t);if(e.onTouchFinish(t),e._cb){t.preventDefault();var r=e.globalToLocal(t.$stageX,t.$stageY,egret.$TempPoint),n=e.viewport,i=-1,o=void 0;e.$TableScroller[2]?(o=r.x+n.scrollH,o>0&&o<n.contentWidth&&(i=n.getElementIdxByPos(o,r.y))):(o=r.y+n.scrollV,o>0&&o<n.contentHeight&&(i=n.getElementIdxByPos(r.x,o))),i>=0&&e.activate(i)&&t.preventDefault()}},e.prototype.onTouchFinish=function(t){var e=this;e.clearEvent();var r=e.$TableScroller;r[6]&&(e.moveEnd(t.stageX,t.stageY),r[6]=!1)},e.prototype.clearEvent=function(){var t=this,e=t._tempStage;e&&(t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchCaptureEnd,t,!0),e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,t),e.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchFinish,t),t._tempStage=null)},e.prototype.moveStart=function(){},e.prototype.moveUpdate=function(t,e){var r=this,n=r.$TableScroller[5],i={x:t,y:e};r.getPointChange(i,n,i),r.setScrollPosition(i.y,i.x,!0),n.x=t,n.y=e},e.prototype.getPointChange=function(t,e,r){var n=this;return r||(r={x:0,y:0}),n.$TableScroller[2]?(r.x=e.x-t.x,r.y=0):n.$TableScroller[3]&&(r.x=0,r.y=e.y-t.y),r},e.prototype.moveEnd=function(t,e){var r=this,n=r.viewport,i=n.numElements;if(!(0>=i)){var o=r.$TableScroller[2],a=0,s=n.getElementIdxByPos(n.scrollH,n.scrollV);if(s>=0){var u=0,l=0,c=0,p=0,h=r.$TableScroller[4],d=n.getElementRect(s);if(o){if(u=h.x-t,1>=u&&u>=-1)return;c=n.contentWidth,p=n.width,l=d.w,a=d.x}else{if(u=h.y-e,1>=u&&u>=-1)return;c=n.contentHeight,p=n.height,l=d.h,a=d.y}if(c>p){var f=Math.abs(u)/l>.2;(i-1>s&&u>0&&f||0>u&&!f)&&(a+=l,s++),a+p>c&&(a=c-p)}else a=0,s=-1}o?r.setScrollLeft(a,r.getAnimationDuration(.5,n.scrollH,a)):r.setScrollTop(a,r.getAnimationDuration(.5,n.scrollV,a)),s>=0&&r.activeInView&&r.activate(s)}},e.prototype.setScrollPosition=function(t,e,r){void 0===r&&(r=!1);var n=this.viewport;if(r){if(0===t&&0===e)return}else if(n.scrollV===t&&n.scrollH===e)return;var i=n.scrollV,o=n.scrollH;if(r){if(0!=t){var a=n.contentHeight-n.height;(0>=i||i>=a)&&(t=.5*t),n.scrollV=i+t}if(0!=e){var s=n.contentWidth-n.width;(0>=o||o>=s)&&(e=.5*e),n.scrollH=o+e}}else n.scrollV=t,n.scrollH=e},e.prototype.setScrollTop=function(t,e){void 0===e&&(e=0);var r=this,n=r.viewport;if(e>0){var i=r.$TableScroller[8];i||(i=new TRain.ActionPropTween,i.setEaseFun(EaseUtil.quartOut),r.$TableScroller[8]=i),i.addProp("scrollV",n.scrollV,t),i.duration=e,TRain.actionMgr.addAction(i,n,!1)}else n.scrollV=t},e.prototype.setScrollLeft=function(t,e){void 0===e&&(e=0);var r=this,n=r.viewport;if(e>0){var i=r.$TableScroller[7];i||(i=new TRain.ActionPropTween,i.setEaseFun(EaseUtil.quartOut),r.$TableScroller[7]=i),i.addProp("scrollH",n.scrollH,t),i.duration=e,TRain.actionMgr.addAction(i,n,!1)}else n.scrollH=t},e.prototype.getAnimationDuration=function(t,e,r){var n=Math.abs(r-e);return 10>=n?0:n/t},e.prototype.validateDL=function(){var e=this,r=e._showInfo;r&&(e._showTable(r.idx,r.ani),e._showInfo=null),t.prototype.validateDL.call(this)},e.scrollThreshold=5,e}(t.Group);t.TableScroller=e,__reflect(e.prototype,"cui.TableScroller")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.anitp=0,e.autoPlay=!1;var r=e;r._runing=!1,r._reverse=!1,r._stopFrame=0/0;var n=new TRain.MovieClip;return r._clip=n,n.addEventListener(egret.Event.COMPLETE,r.onAniFin,r),r.addChild(n),e}return __extends(e,t),e.prototype.$hitTest=function(t,e){return null},Object.defineProperty(e.prototype,"aniName",{get:function(){return this._aniName},set:function(t){var e=this;t=t?t:null,e._aniName!=t&&(e._aniName=t,e.freeClipData(),t&&e._inited&&e.loadMCData())},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=this;e._aniName&&e.loadMCData()},e.prototype.dispose=function(){var e=this;e.freeClipData();var r=e._clip;r.dispose(),r.removeEventListener(egret.Event.COMPLETE,e.onAniFin,e),t.prototype.dispose.call(this)},e.prototype.$onAddToStage=function(e,r){t.prototype.$onAddToStage.call(this,e,r);var n=this;n._clipData&&n._runing&&TRain.mcMgr.add(n._clip)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this);var e=this;e._clipData&&e._runing&&TRain.mcMgr.remove(e._clip)},e.prototype.loadMCData=function(){var t=this,e=t._aniName,r=e.indexOf(".");0>r?TRain.mcMgr.getMCDataAsync(t.anitp,e,t.onLoadDataFinish,t):TRain.mcMgr.getMCDataAsync(t.anitp,e.substr(0,r),t.onLoadDataFinish,t,e.substring(r+1))},e.prototype.onLoadDataFinish=function(t,e){if(t){var r=this;if(e!=r.anitp)return void TRain.mcMgr.freeMCData(r.anitp,t);var n=r._aniName;if(null!=n){var i=n.indexOf("."),o=0>i?t.resName:t.resName+"."+t.aniName;if(n!=o)return void TRain.mcMgr.freeMCData(r.anitp,t);if(r._clipData=t,r._reverse){var a=t.clone(!0);r._reverseData=a,t=a}r._clip.movieClipData=t;var s=r._playData;if(s)r.play(s.frame,s.playTimes);else if(r.autoPlay)r.play();else if(!isNaN(r._stopFrame)){var u=r._clip;u.gotoAndStop(r._stopFrame),r.stage&&r._runing&&TRain.mcMgr.remove(u),r._runing=!1}r.dispatchEventWith("created",!1),r.invalidateDL()}}},e.prototype.reverseChanged=function(t){var e=this;e._reverse=t;var r;t?(r=e._reverseData,r||(r=e._clipData.clone(!0))):r=e._clipData,e._clip.movieClipData=r},e.prototype.gotoAndPlay=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=!1);var n=this,i=n._clipData;i?(n._reverse!=r&&n.reverseChanged(r),n.play(t,e)):(n._reverse=r,n._playData={frame:t,playTimes:e})},e.prototype.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0/0);var r=this;r._runing=!0;var n=r._clip;n.gotoAndPlay(t,e),r.stage&&TRain.mcMgr.add(n)},e.prototype.gotoAndStop=function(t,e){void 0===e&&(e=!1);var r=this,n=r._clipData;if(n){r._reverse!=e&&r.reverseChanged(e);var i=r._clip;i.gotoAndStop(t),r.stage&&r._runing&&TRain.mcMgr.remove(i),r._runing=!1}else r._stopFrame=t},e.prototype.stop=function(){var t=this,e=t._clip;e&&t._runing&&(t._runing=!1,e.stop(),t.stage&&TRain.mcMgr.remove(e))},e.prototype.onAniFin=function(t){var e=this;e._runing=!1;var r=e._clip;TRain.mcMgr.remove(r),e.dispatchEventWith("play_fin",!1)},e.prototype.freeClipData=function(){var t=this,e=t._clipData;e&&(t.stop(),t._reverseData=null,t._clipData=null,t._clip.movieClipData=null,TRain.mcMgr.freeMCData(t.anitp,e))},e}(t.BaseContainer);t.UIMovieClip=e,__reflect(e.prototype,"cui.UIMovieClip")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this,r=e;return r.tag=0,r.ud=null,e}return __extends(e,t),e.prototype.dispose=function(){var e=this;e.onTouchFinish(),e._cb=null,t.prototype.dispose.call(this)},e.prototype.hasProp=function(t){return!1},e.prototype.dataChanged=function(){var t=this,e=t._data;for(var r in e)t.hasProp(r)&&(t[r]=e[r])},e.prototype.setTarget=function(t,e){var r=this;r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouchBegin,r),r._cb={fun:t,tar:e}},e.prototype.onTouchBegin=function(t){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e);var r=e.$stage;r.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchFinish,e),e._tempStage=r,t.updateAfterEvent()},e.prototype.onTouchEnd=function(t){var e=this;e.onTouchFinish(),t.isDefaultPrevented()||(t.preventDefault(),e.clkReleased())},e.prototype.onTouchFinish=function(){var t=this,e=t._tempStage;e&&(e.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchFinish,t),t.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t._tempStage=null)},e.prototype.clkReleased=function(){var t=this._cb;t&&t.fun.call(t.tar,this)},e}(t.DataItem);t.UITile=e,__reflect(e.prototype,"cui.UITile")}(cui||(cui={}));var cui;!function(t){t.htmlParser=new egret.HtmlTextParser,t.tempPt={x:0,y:0},t.tempRect={x:0,y:0,w:0,h:0}}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isHorizontal=!0,e.gap=0,e.horizontalAlign="left",e.verticalAlign="top",e}return __extends(e,t),e.prototype.getElementRect=function(t){var e,r=this,n=r._target,i=r.target.dataProvider,o=0,a=0,s=n.contentWidth,u=n.contentHeight,l=r.gap,c=n.getElementAt(t);if(c)return e=i.getItemAt(t),r.isHorizontal?(o=c.x,s=e.width+l):(a=c.y,u=e.height+l),{x:o,y:a,w:s,h:u};if(r.isFixedSize())r.isHorizontal?(s=r.itemW+l,o=s*t+r.paddingLeft):(u=r.itemH+l,a=u*t+r.paddingTop);else if(r.isHorizontal){o=r.paddingLeft;for(var p=0;t>p;p++)e=i.getItemAt(p),o+=e.width+l;e=i.getItemAt(t),s=e.width+l}else{a=r.paddingTop;for(var p=0;t>p;p++)e=i.getItemAt(p),a+=e.height+l;e=i.getItemAt(t),u=e.height+l}return{x:o,y:a,w:s,h:u}},e.prototype.getElementIdxByPos=function(t,e){var r=this,n=-1,i=r.gap,o=r.target.dataProvider,a=o.length;if(r.isFixedSize())n=r.isHorizontal?t>r.paddingLeft?Math.floor((t-r.paddingLeft)/(r.itemW+i)):0:e>r.paddingTop?Math.floor((e-r.paddingTop)/(r.itemH+i)):0;else{var s=0,u=void 0;r._target;if(r.isHorizontal){for(;a>s;s++)if(u=o.getItemAt(s),t-=u.width,0>=t){n=s;break}}else for(;a>s;s++)if(u=o.getItemAt(s),e-=u.height,0>=e){n=s;break}}return n>=a&&(n=a-1),n},e.prototype.getElementSize=function(t){var e=this;if(e.isFixedSize())return{w:e.itemW,h:e.itemH};var r=e.target.dataProvider.getItemAt(t);return{w:r.width,h:r.height}},e.prototype.adjustViewIndex=function(t){var e=this,r=t.$getWidth(),n=t.$getHeight();return e.isHorizontal?e.adjustViewIndexH(t,r,n):e.adjustViewIndexV(t,r,n)},e.prototype.adjustViewIndexH=function(t,e,r){var n=this,i=0,o=0,a=n.gap,s=t.scrollH,u=s+e-n.paddingRight,l=n.paddingLeft,c=0,p=t.dataProvider,h=p.length;if(n.isFixedSize()){var d=n.itemW+a;s>l&&(i=Math.floor((s-l)/d),i>=h&&(i=h-1)),u>l&&(o=Math.floor((u-l)/d),o>=h&&(o=h-1))}else{var f=void 0,v=0;if(s>l)for(;h>v;v++){if(f=p.getItemAt(v),c=l+f.width+a,c>s){i=v;break}l=c}for(;h>v&&(f=p.getItemAt(v),l+=f.width+a,o=v,!(l>=u));v++);}var g=n._startIdx,y=n._endIdx;return n._startIdx=i,n._endIdx=o,g!=i||y!=o},e.prototype.adjustViewIndexV=function(t,e,r){var n=this,i=0,o=0,a=n.gap,s=t.scrollV,u=s+r-n.paddingBottom,l=n.paddingTop,c=0,p=t.dataProvider,h=p.length;if(n.isFixedSize()){var d=n.itemH+a;s>l&&(i=Math.floor((s-l)/d),i>=h&&(i=h-1)),u>l&&(o=Math.floor((u-l)/d),o>=h&&(o=h-1))}else{var f=void 0,v=0;if(s>l)for(;h>v;v++){if(f=p.getItemAt(v),c=l+f.height+a,c>s){i=v;break}l=c}for(;h>v&&(f=p.getItemAt(v),l+=f.height+a,o=v,!(l>=u));v++);}var g=n._startIdx,y=n._endIdx;return n._startIdx=i,n._endIdx=o,g!=i||y!=o},e.prototype.updateFixSizeDList=function(t,e){var r=this,n=r._target;r.isHorizontal?r.updateFixSizeH(n):r.updateFixSizeV(n)},e.prototype.updateRealDList=function(t,e){var r=this,n=r._target;r.isHorizontal?r.updateDLH(n):r.updateDLV(n)},e.prototype.updateFixSizeH=function(t){for(var e=this,r=t.dataProvider,n=e.itemW+e.gap,i=e.paddingLeft+e.paddingRight+n*r.length,o=e.paddingTop+e.paddingBottom+e.itemH,a=e._startIdx,s=e._endIdx,u=e.paddingLeft+n*a,l=e.paddingTop,c=a;s>=c;c++){var p=t.getVirtualElementAt(c);p.x=u,p.y=l,u+=n}t.setContentSize(i,o)},e.prototype.updateDLH=function(t){for(var e,r=this,n=t.dataProvider,i=r.gap,o=0,a=n.length,s=r.paddingLeft+r.paddingRight,u=r.paddingTop+r.paddingBottom;a>o;o++)e=n.getItemAt(o),s+=e.width+i,u=Math.max(u,e.height);var l=r._startIdx,c=r._endIdx,p=r.paddingLeft,h=0;for(o=0;l>o;o++)e=n.getItemAt(o),p=p+e.width+i;var d=t.$getHeight(),f=r.paddingTop;if(r.verticalAlign==egret.HorizontalAlign.CENTER)for(;c>=o;o++){var v=t.getVirtualElementAt(o);e=n.getItemAt(o),h=f+(d-e.height)/2,v.x=p,v.y=h,p+=e.width+i}else if(r.verticalAlign==egret.VerticalAlign.BOTTOM)for(;c>=o;o++){var v=t.getVirtualElementAt(o);e=n.getItemAt(o),h=d-e.height-f,v.x=p,v.y=h,p+=e.width+i}else for(;c>=o;o++){var v=t.getVirtualElementAt(o);e=n.getItemAt(o),v.x=p,v.y=f,p+=e.width+i}t.setContentSize(s,u)},e.prototype.updateFixSizeV=function(t){for(var e=this,r=t.dataProvider,n=e.itemH+e.gap,i=e.paddingLeft+e.paddingRight+e.itemW,o=e.paddingTop+e.paddingBottom+n*r.length,a=e._startIdx,s=e._endIdx,u=e.paddingTop+a*n,l=e.paddingLeft,c=a;s>=c;c++){var p=t.getVirtualElementAt(c);p.x=l,p.y=u,u+=n}t.setContentSize(i,o)},e.prototype.updateDLV=function(t){for(var e,r=this,n=t.dataProvider,i=r.gap,o=0,a=n.length,s=r.paddingLeft+r.paddingRight,u=r.paddingTop+r.paddingBottom;a>o;o++)e=n.getItemAt(o),u+=e.height+i,s=Math.max(s,e.width);var l=r._startIdx,c=r._endIdx,p=0,h=r.paddingTop;for(o=0;l>o;o++)e=n.getItemAt(o),h=h+e.height+i;var d=t.$getWidth(),f=r.paddingLeft;if(r.horizontalAlign==egret.HorizontalAlign.CENTER)for(;c>=o;o++){var v=t.getVirtualElementAt(o);e=n.getItemAt(o),p=f+(d-e.width)/2,v.x=p,v.y=h,h+=e.height+i}else if(r.horizontalAlign==egret.HorizontalAlign.RIGHT)for(;c>=o;o++){var v=t.getVirtualElementAt(o);e=n.getItemAt(o),p=d-e.width-f,v.x=p,v.y=h,h+=e.height+i}else for(;c>=o;o++){var v=t.getVirtualElementAt(o);e=n.getItemAt(o),v.x=f,v.y=h,h+=e.height+i}t.setContentSize(s,u)},e}(t.LayoutBase);t.DataLineLayout=e,__reflect(e.prototype,"cui.DataLineLayout")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isHorizontal=!0,e.gap=0,e.horizontalAlign="left",e.verticalAlign="top",e}return __extends(e,t),e.prototype.getElementRect=function(t){var e=this,r=e._target,n=0,i=0,o=r.contentHeight,a=r.contentWidth,s=e.gap,u=r.getElementAt(t);if(u.visible)e.isHorizontal?(n=u.x,a=u.width+s):(i=u.y,o=u.height+s);else{var l=0;if(e.isHorizontal)for(n=e.paddingLeft,a=u.width+s;t>l;l++)u=r.getElementAt(l),n+=u.width+s;else for(i=e.paddingLeft,o=u.height+s;t>l;l++)u=r.getElementAt(l),i+=u.height+s}return{x:n,y:i,w:a,h:o}},e.prototype.getElementIdxByPos=function(t,e){var r=this,n=-1,i=r.gap,o=r._target,a=o.numElements;if(r.isFixedSize())n=r.isHorizontal?t>r.paddingLeft?Math.floor((t-r.paddingLeft)/(r.itemW+i)):0:e>r.paddingTop?Math.floor((e-r.paddingTop)/(r.itemH+i)):0;else{var s=0,u=void 0;if(r.isHorizontal){for(;a>s;s++)if(u=o.getElementAt(s),t-=u.width+i,0>=t){n=s;break}}else for(;a>s;s++)if(u=o.getElementAt(s),e-=u.height+i,0>=e){n=s;break}}return n>=a&&(n=a-1),n},e.prototype.adjustViewIndex=function(t){var e=this,r=t.$getWidth(),n=t.$getHeight();return e.isHorizontal?e.adjustViewIndexH(t,r,n):e.adjustViewIndexV(t,r,n)},e.prototype.adjustViewIndexH=function(t,e,r){var n,i=this,o=0,a=0,s=i.gap,u=t.scrollH,l=u+e-i.paddingRight,c=i.paddingLeft,p=0,h=t.numChildren;if(i.isFixedSize()){var d=i.itemW+s;u>c&&(o=Math.floor((u-c)/d),o>=h&&(o=h-1)),l>c&&(a=Math.floor((l-c)/d),a>=h&&(a=h-1))}else{var f=0;if(u>c)for(;h>f;f++){if(n=t.getElementAt(f),p=c+n.$getWidth()+s,p>u){o=f;break}c=p}for(;h>f&&(n=t.getElementAt(f),c+=n.$getWidth()+s,a=f,!(c>=l));f++);}var v=i._startIdx,g=i._endIdx;return i._startIdx=o,i._endIdx=a,v!=o||g!=a},e.prototype.adjustViewIndexV=function(t,e,r){var n,i=this,o=0,a=0,s=i.gap,u=t.scrollV,l=u+r-i.paddingBottom,c=i.paddingTop,p=0,h=t.numChildren;if(i.isFixedSize()){var d=i.itemH+s;u>c&&(o=Math.floor((u-c)/d),o>=h&&(o=h-1)),l>c&&(a=Math.floor((l-c)/d),a>=h&&(a=h-1))}else{var f=0;if(u>c)for(;h>f;f++){if(n=t.getElementAt(f),p=c+n.$getHeight()+s,p>u){o=f;break}c=p}for(;h>f&&(n=t.getElementAt(f),c+=n.$getHeight()+s,a=f,!(c>=l));f++);}var v=i._startIdx,g=i._endIdx;return i._startIdx=o,i._endIdx=a,v!=o||g!=a},e.prototype.updateFixSizeDList=function(t,e){var r=this;r.isHorizontal?r.updateFixSizeH(r._target):r.updateFixSizeV(r._target)},e.prototype.updateRealDList=function(t,e){var r=this;r.isHorizontal?r.updateDLH(r._target):r.updateDLV(r._target)},e.prototype.updateFixSizeH=function(t){for(var e=this,r=e.itemW+e.gap,n=e.paddingLeft+e.paddingRight+r*t.numElements,i=e.paddingTop+e.paddingBottom+e.itemH,o=e._startIdx,a=e._endIdx,s=e.paddingLeft+r*o,u=e.paddingTop,l=o;a>=l;l++){var c=t.getElementAt(l);c.x=s,c.y=u,s+=r}t.setContentSize(n,i)},e.prototype.updateDLH=function(t){for(var e,r=this,n=r.gap,i=0,o=t.numElements,a=r.paddingLeft+r.paddingRight,s=r.paddingTop+r.paddingBottom;o>i;i++)e=t.getElementAt(i),a+=e.width+n,s=Math.max(s,e.height);var u=r._startIdx,l=r._endIdx,c=r.paddingLeft,p=0;for(i=0;u>i;i++)e=t.getElementAt(i),c=c+e.width+n;var h=t.$getHeight(),d=r.paddingTop;
if(r.verticalAlign==egret.HorizontalAlign.CENTER)for(;l>=i;i++)e=t.getElementAt(i),p=d+(h-e.height)/2,e.x=c,e.y=p,c+=e.width+n;else if(r.verticalAlign==egret.VerticalAlign.BOTTOM)e=t.getElementAt(i),p=h-d-e.height,e.x=c,e.y=p,c+=e.width+n;else for(;l>=i;i++)e=t.getElementAt(i),e.x=c,e.y=d,c+=e.width+n;t.setContentSize(a,s)},e.prototype.updateFixSizeV=function(t){for(var e=this,r=e.itemH+e.gap,n=e.paddingLeft+e.paddingRight+e.itemW,i=e.paddingTop+e.paddingBottom+r*t.numElements,o=e._startIdx,a=e._endIdx,s=e.paddingTop+o*r,u=e.paddingLeft,l=o;a>=l;l++){var c=t.getElementAt(l);c.x=u,c.y=s,s+=r}t.setContentSize(n,i)},e.prototype.updateDLV=function(t){for(var e,r=this,n=r.gap,i=0,o=t.numElements,a=r.paddingLeft+r.paddingRight,s=r.paddingTop+r.paddingBottom;o>i;i++)e=t.getElementAt(i),s+=e.height+n,a=Math.max(a,e.width);var u=r._startIdx,l=r._endIdx,c=0,p=r.paddingTop;for(i=0;u>i;i++)e=t.getElementAt(i),p=p+e.height+n;var h=t.$getWidth(),d=r.paddingLeft;if(r.horizontalAlign==egret.HorizontalAlign.CENTER)for(;l>=i;i++)e=t.getElementAt(i),c=d+(h-e.width)/2,e.x=c,e.y=p,p+=e.height+n;else if(r.horizontalAlign==egret.HorizontalAlign.RIGHT)e=t.getElementAt(i),c=h-d-e.width,e.x=c,e.y=p,p+=e.height+n;else for(;l>=i;i++)e=t.getElementAt(i),e.x=d,e.y=p,p+=e.height+n;t.setContentSize(a,s)},e}(t.LayoutBase);t.LineLayout=e,__reflect(e.prototype,"cui.LineLayout")}(cui||(cui={}));var cui;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isHorizontal=!0,e.horizontalGap=0,e.verticalGap=0,e._count=0,e}return __extends(e,t),e.prototype.getElementRect=function(t){var e=this,r=e._target,n=0,i=0,o=e.itemW+e.horizontalGap,a=e.itemH+e.verticalGap,s=r.getElementAt(t);if(s&&s.visible)return e.isHorizontal?n=s.x:i=s.y,{x:n,y:i,w:o,h:a};var u=e._count,l=Math.floor(t/u),c=t-l*u;return e.isHorizontal?(l>0&&(n=o*l+e.paddingLeft),c>0&&(i=a*c+e.paddingTop)):(c>0&&(n=a*c+e.paddingLeft),l>0&&(i=o*l+e.paddingTop)),{x:n,y:i,w:o,h:a}},e.prototype.getItemIdxByPos=function(t,e){var r=this,n=-1,i=r._target.numElements;if(r.isFixedSize()&&t>r.paddingLeft&&e>r.paddingTop){var o=r.itemW+r.horizontalGap,a=r.itemH+r.verticalGap,s=Math.floor((t-r.paddingLeft)/o),u=Math.floor((e-r.paddingTop)/a);n=r.isHorizontal?s*r._count+u:u*r._count+s}return n>=i&&(n=i-1),n},e.prototype.adjustViewIndex=function(t){var e=this;if(e.itemH<=0||e.itemW<=0)return e._startIdx=e._endIdx=-1,!1;var r=t.$getWidth(),n=t.$getHeight();return e.isHorizontal?e.adjustViewIndexH(t,r,n):e.adjustViewIndexV(t,r,n)},e.prototype.adjustViewIndexH=function(t,e,r){var n=this,i=n.verticalGap,o=Math.floor((r-n.paddingTop-n.paddingBottom+i)/(n.itemH+i));n._count=o;var a=n.paddingLeft,s=0,u=0,l=n.itemW+n.horizontalGap,c=t.scrollH;c>a&&(s=Math.floor((c-a)/l));var p=t.scrollH+e-n.paddingRight;p>a&&(u=Math.floor((p-a)/l));var h=s*o,d=u*o+o-1,f=t.numElements;h>=f&&(h=f-1),d>=f&&(d=f-1);var v=n._startIdx,g=n._endIdx;return n._startIdx=h,n._endIdx=d,v!=h||g!=d},e.prototype.adjustViewIndexV=function(t,e,r){var n=this,i=n.horizontalGap,o=Math.floor((e-n.paddingLeft-n.paddingRight+i)/(n.itemW+i));n._count=o;var a=n.paddingTop,s=0,u=0,l=n.itemH+n.verticalGap,c=t.scrollV;c>a&&(s=Math.floor((c-a)/l));var p=t.scrollV+r-n.paddingBottom;p>a&&(u=Math.floor((p-a)/l));var h=s*o,d=u*o+o-1,f=t.numElements;h>=f&&(h=f-1),d>=f&&(d=f-1);var v=n._startIdx,g=n._endIdx;return n._startIdx=h,n._endIdx=d,v!=h||g!=d},e.prototype.updateFixSizeDList=function(t,e){var r=this;r.isHorizontal?r.updateFixSizeH(r._target):r.updateFixSizeV(r._target)},e.prototype.updateRealDList=function(t,e){},e.prototype.updateFixSizeH=function(t){for(var e=this,r=e.paddingTop,n=e._count,i=t.numElements,o=e.itemW+e.horizontalGap,a=e.itemH+e.verticalGap,s=Math.ceil(i/n),u=e.paddingLeft+e.paddingRight+o*s,l=r+e.paddingBottom+e.itemH,c=Math.floor(e._startIdx/n),p=Math.floor(e._endIdx/n),h=e.paddingLeft+o*c,d=0,f=0,v=c;p>v;v++){f=v*n,d=r;for(var g=0;n>g;g++){var y=t.getVirtualElementAt(f+g);y.x=h,y.y=d,d+=a}h+=o}f=p*n;var _=f+n;_>i&&(_=i),d=r;for(var g=f;_>g;g++){var y=t.getVirtualElementAt(g);y.x=h,y.y=d,d+=a}t.setContentSize(u,l)},e.prototype.updateFixSizeV=function(t){for(var e=this,r=e.paddingLeft,n=e._count,i=t.numElements,o=e.itemW+e.horizontalGap,a=e.itemH+e.verticalGap,s=Math.ceil(i/n),u=e.paddingLeft+e.paddingRight+e.itemW,l=r+e.paddingBottom+a*s,c=Math.floor(e._startIdx/n),p=Math.floor(e._endIdx/n),h=0,d=e.paddingTop+a*c,f=0,v=c;p>v;v++){f=v*n,h=r;for(var g=0;n>g;g++){var y=t.getVirtualElementAt(f+g);y.x=h,y.y=d,h+=o}d+=a}f=p*n;var _=f+n;_>i&&(_=i),h=r;for(var g=f;_>g;g++){var y=t.getVirtualElementAt(g);y.x=h,y.y=d,h+=o}t.setContentSize(u,l)},e}(t.LayoutBase);t.TileLayout=e,__reflect(e.prototype,"cui.TileLayout")}(cui||(cui={}));var cui;!function(t){var e=function(){function t(t,e){this.easerFunction=EaseUtil.sineInOut,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=e}return t.prototype.play=function(){this.stop(),this.start()},t.prototype.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},t.prototype.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},t.prototype.dispose=function(){this.updateFunction=null,this.endFunction=null,this.thisObject=null},t.prototype.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var r=this.duration,n=0==r?1:Math.min(e,r)/r;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var i=e>=r;return i&&this.stop(),i&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=e,__reflect(e.prototype,"cui.Animation")}(cui||(cui={}));var cui;!function(t){var e=4,r=[1,1.33,1.66,2],n=2.33,i=.02,o=.998,a=.95,s=Math.log(o),u=function(){function u(e,r,n){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.disposed=!1,this.started=!0,this.updateFunction=e,this.endFunction=r,this.target=n,this.animation=new t.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=EaseUtil.cubicOut}return u.prototype.isPlaying=function(){return this.animation.isPlaying},u.prototype.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},u.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.animation.dispose(),egret.stopTick(this.onTick,this),this.started=!1,this.updateFunction=null,this.endFunction=null,this.target=null)},u.prototype.isStarted=function(){return this.started},u.prototype.start=function(t){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=t,egret.startTick(this.onTick,this)},u.prototype.update=function(t,e,r){e=Math.max(e,0),this.currentPosition=t,this.maxScrollPos=e;var n=this.offsetPoint-t,i=n+r;this.offsetPoint=t,0>i&&(this.$bounces?i-=.5*n:i=0),i>e&&(this.$bounces?i-=.5*n:i=e),this.currentScrollPos=i,this.updateFunction.call(this.target,i)},u.prototype.finish=function(t,e){egret.stopTick(this.onTick,this),this.started=!1;for(var u=this.velocity*n,l=this.previousVelocity,c=l.length,p=n,h=0;c>h;h++){var d=r[h];u+=l[0]*d,p+=d}var f=u/p,v=Math.abs(f),g=0,y=0;if(v>i)if(y=t+(f-i)/s*2*this.$scrollFactor,0>y||y>e)for(y=t;Math.abs(f)>i;)y-=f,f*=0>y||y>e?o*a:o,g++;else g=Math.log(i/v)/s;else y=t;g>0?(this.$bounces||(0>y?y=0:y>e&&(y=e)),this.throwTo(y,g)):this.finishScrolling()},u.prototype.onTick=function(t){if(!this.disposed){var r=t-this.previousTime;if(r>10){var n=this.previousVelocity;n.length>=e&&n.shift(),this.velocity=(this.currentPosition-this.previousPosition)/r,n.push(this.velocity),this.previousTime=t,this.previousPosition=this.currentPosition}return!0}},u.prototype.finishScrolling=function(t){var e=this.currentScrollPos,r=this.maxScrollPos,n=e;0>e&&(n=0),e>r&&(n=r),this.throwTo(n,300)},u.prototype.throwTo=function(t,e){void 0===e&&(e=500);var r=this.currentScrollPos;if(r==t)return void this.endFunction.call(this.target);var n=this.animation;n.duration=e,n.from=r,n.to=t,n.play()},u.prototype.onScrollingUpdate=function(t){this.disposed||(this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue))},u}();t.TouchScroll=u,__reflect(u.prototype,"cui.TouchScroll")}(cui||(cui={}));var TRain;!function(t){var e=function(){function t(){this._gpList={}}return t.prototype.getGp=function(t){return this._gpList[t]},t.prototype.getTxtByKey=function(t){var e=t.split("#"),r=this._gpList[e[0]];return r?r[e[1]]:void 0},t.prototype.getTxt=function(t,e){var r=this._gpList[t];return r?r[e]:void 0},t.prototype.getErrText=function(t){var e=this._errGp;return e?e[t]:(e=this._gpList.errCode,e?(this._errGp=e,e[t]):void 0)},t.prototype.addGps=function(t){var e=this._gpList;for(var r in t){var n=t[r],i=e[r];if(i)for(var o in n)i[o]=n[o];else e[r]=n}},t}();t.LangManager=e,__reflect(e.prototype,"TRain.LangManager"),t.langMgr=new e}(TRain||(TRain={}));var TRain;!function(t){var e=function(){function e(){var t=this;t._timeoutHandler=0,t._mcs=[]}return e.prototype.doGC=function(){var t=this;0==t._timeoutHandler&&(t._disposeTp=0,t.disposeRess())},e.prototype.stopGC=function(){var e=this;0!==e._timeoutHandler&&(t.core.rmvDelayDoByID(e._timeoutHandler),e._timeoutHandler=0)},e.prototype.init=function(t,e){var r=this;r._armTps=t,r._oneUrl=e;for(var n=[],i=[],o=[],a=0,s=t.length;s>a;a++)n.push({}),i.push({}),o.push({});r._mcRess=n,r._usecnts=i,r._loadings=o},e.prototype.getMCUrl=function(t,e){return this._oneUrl?CONF.mcUrl+e+".mc":CONF.mcUrl+this._armTps[t]+"/"+e+".mc"},e.prototype.getMCRess=function(t,e,r,n){var i=this;r.push(i.getMCUrl(t,e)),n.push("mc")},e.prototype.incUsecnt=function(t,e){var r=this._usecnts[t];e in r?r[e]++:r[e]=1},e.prototype.decUsecnt=function(t,e){var r=this._usecnts[t];r.hasOwnProperty(e)&&r[e]--},e.prototype.getMCData=function(t,e,r){var n=this,i=n._mcRess[t][e];return i?n._getMCData(i,t,e,r):null},e.prototype.hasMCRes=function(t,e){return!!this._mcRess[t][e]},e.prototype._getMCData=function(e,r,n,i){i=i||"mc";var o=e.clips,a=o[i];if("undefined"==typeof a){var s=e.sheet;if(s){var u=e.conf[i],l=u.res||e.conf.res;a=new t.MovieClipData(u,l,s),a.resName=n,a.aniName=i,o[i]=a}else a=null,o[i]=a}return a&&this.incUsecnt(r,n),a},e.prototype.getMCDataAsync=function(e,r,n,i,o){var a=this,s=a._mcRess[e],u=s[r];if(u){var l=a._getMCData(u,e,r,o);return void t.core.addNextDo(n,i,l,e)}var c=function(t,e,r){var s=a._mcRess[e][r],u=a._getMCData(s,e,r,o);n.call(i,u,e)};a.loadRessImpl(e,r,c,a)},e.prototype.loadMCs=function(e,r,n,i){for(var o,a=this,s=e.length,u=[],l=0;s>l;++l)o=e[l],a.hasMCRes(o.mcTp,o.resName)||u.push(o);if(s=u.length,0==s)return void(null!=r&&t.core.addNextDo(r,n,!0,i));var c;if(null!=r){var p=!0,h=n;c=function(t,e,n){s--,t||(p=!1),0>=s&&r.call(h,p,i)},n=a}for(var l=0,d=s;d>l;++l)o=u[l],a.loadRessImpl(o.mcTp,o.resName,c,a)},e.prototype.loadMCRes=function(e,r,n,i){var o=this;return o.hasMCRes(e,r)?void(null!=n&&t.core.addNextDo(n,i,!0,e,r)):void o.loadRessImpl(e,r,n,i)},e.prototype.loadRessImpl=function(e,r,n,i){function o(t){a.onLoadArmResFin(t,e,r)}var a=this,s=a._loadings[e],u=s[r],l={callback:n,target:i};if(u)return void u.push(l);u=[l],s[r]=u;var c=a.getMCUrl(e,r);t.assetMgr.getTex(c,o,a,"mc")},e.prototype.onLoadArmResFin=function(t,e,r){var n=this,i=n._mcRess[e],o=i[r];if(!o){o={conf:null,sheet:null,clips:{}};var a=!!t;a&&(o.conf=t.conf,o.sheet=new egret.SpriteSheet(t)),i[r]=o;var s=n._loadings[e],u=s[r];delete s[r];for(var l=u.length-1;l>=0;--l){var c=u[l];c.callback.call(c.target,a,e,r)}}},e.prototype.freeMCData=function(t,e){this.decUsecnt(t,e.resName)},e.prototype.disposeRess=function(){var e=this,r=e._disposeTp,n=[],i=e._mcRess[r],o=e._usecnts[r];for(var a in o){var s=o[a];if(0>=s){var u=i[a];u.sheet&&(delete i[a],t.assetMgr.releaseTex(u.sheet.$texture),n.push(a))}}if(n.length>0)for(var l=0,c=n.length;c>l;++l)delete o[n[l]];r++,r<e._armTps.length?(e._disposeTp=r,e._timeoutHandler=t.core.addDelayDo(e.disposeRess,e,CONF.mcGCTm,0,!1)):(e._disposeTp=0,e._timeoutHandler=0)},e.prototype.add=function(t){var e=this._mcs;e.indexOf(t)>=0||e.push(t)},e.prototype.remove=function(t){var e=this._mcs,r=e.indexOf(t);r>=0&&e.splice(r,1)},e.prototype.advanceTime=function(t){var e=this._mcs,r=e.length;if(r>0)for(var n=r-1;n>=0;--n){var i=e[n];i&&i.advanceTime(t)}},e}();t.MCManager=e,__reflect(e.prototype,"TRain.MCManager"),t.mcMgr=new e}(TRain||(TRain={}));var TRain;!function(t){var e=function(t){function e(){var e=t.call(this)||this,r=e;return r.$MovieClip=[null,null,egret.Bitmap.defaultSmoothing,!1,0,0,0,0,0,0],r.$renderNode=new egret.sys.BitmapNode,e}return __extends(e,t),e.prototype.dispose=function(){var t=this.$MovieClip;t[0]=null,t[1]=null},Object.defineProperty(e.prototype,"smoothing",{get:function(){return this.$MovieClip[2]},set:function(t){t=!!t,this.$MovieClip[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this.$MovieClip[7]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this.$MovieClip[8]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){var t=this.$MovieClip[4];return t>0?Math.floor(1e3/t):0},set:function(t){var e=0;if(0>=t)e=1e3/t;else{var r=this.$MovieClip[1];r&&(e=r.intervalTime)}this.$MovieClip[4]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var t=this.$MovieClip;return t[4]*t[7]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curSchedule",{get:function(){var t=this.$MovieClip;return t[4]*t[8]+t[9]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){var t=this.$MovieClip;return t[3]&&t[7]>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movieClipData",{get:function(){return this.$MovieClip[1]},set:function(t){var e=this,r=this.$MovieClip;r[1]!=t&&(r[6]=0,r[8]=0,r[9]=0,r[1]=t,t?(r[4]=t.intervalTime,r[7]=t.numFrames):(r[4]=0,r[7]=0),e.updateDisplay())},enumerable:!0,configurable:!0}),e.prototype.getFrameLabelByName=function(t){var e=this.$MovieClip[1];if(e){var r=e.labels;if(r)for(var n=null,i=0,o=r.length;o>i;i++)if(n=r[i],n.name==t)return n;return null}},e.prototype.getFrameLabelByFrame=function(t){var e=this.$MovieClip[1];if(e){var r=e.labels;if(r)for(var n=null,i=0;i<r.length;i++)if(n=r[i],n.frame==t)return n;return null}},e.prototype.getFrameLabelForFrame=function(t){var e=this.$MovieClip[1];if(!e)return null;var r=null,n=e.labels;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(o.frame>t)return r;r=o}return r},e.prototype.setPlayLabel=function(t){var e=this.$MovieClip,r=e[1];if(!r)return null;var n=0,i=0;if(t){var o=r.labels;if(o)for(var a=null,s=0;s<o.length;s++)if(a=o[s],t==a.name){n=a.frame,i=a.end;break}}e[6]=n,0==i&&(i=r.numFrames-1);var u=i>n?i-n+1:0;e[7]=u,n!=e[8]&&(e[8]=n,this.updateDisplay())},e.prototype.stop=function(){this.$MovieClip[3]=!1},e.prototype.gotoAndPlay=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0/0);var r=this,n=r.$MovieClip,i=n[1];i&&(isNaN(e)&&(e=i.loop),n[3]=!0,n[5]=e,n[9]=0,r.gotoFrame(t))},e.prototype.gotoTmAndPlay=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0/0);var r=this,n=r.$MovieClip,i=n[1];if(i){isNaN(e)&&(e=i.loop),n[3]=!0,n[5]=e;var o=n[4],a=Math.floor(t/o);n[9]=t%o,r.gotoFrame(a%n[7])}},e.prototype.gotoAndStop=function(t){var e=this,r=e.$MovieClip;r[3]=!1,r[1]&&(r[9]=0,e.gotoFrame(t))},e.prototype.gotoFrame=function(t){var e=this.$MovieClip;if(0>t)t=0;else{var r=e[6],n=r+e[7]-1;t>n&&(t=n)}e[8]!=t&&(e[8]=t,this.updateDisplay())},e.prototype.advanceTime=function(t){var e=this,r=e.$MovieClip,n=r[7];if(r[3]&&n>0){var i=t+r[9],o=r[4],a=Math.floor(i/o);if(0>=a)return void(r[9]=i);r[9]=i%o;var s=r[6],u=s+n-1;a%=n;for(var l=r[8],c=r[1].events,p=[],h=r[5],d=!1,f=0;a>f;++f){if(l++,l>u)if(0>=h)p.push({type:egret.Event.LOOP_COMPLETE}),l=s;else{if(h--,!(h>0)){l=u,d=!0,p.push({type:egret.Event.COMPLETE});break}p.push({type:egret.Event.LOOP_COMPLETE,data:h}),l=s}if(c){var v=c[l];v&&p.push({type:"frame_label",data:v})}}if(r[5]=h,r[8]=l,e.updateDisplay(),d&&e.stop(),p.length>0)for(var g=p.length,f=0;g>f;++f){var y=p[f];e.dispatchEventWith(y.type,!1,y.data)}}},e.prototype.updateDisplay=function(){var t,e=this.$MovieClip,r=e[0],n=e[1];n&&(t=n.getFrameTex(e[8])),r!=t&&(e[0]=t,this.$renderDirty=!0)},e.prototype.$updateRenderNode=function(){var t=this,e=t.$MovieClip,r=e[0];if(r){var n=Math.round(r.$offsetX),i=Math.round(r.$offsetY),o=r.$bitmapWidth,a=r.$bitmapHeight,s=r.$getTextureWidth(),u=r.$getTextureHeight(),l=Math.round(r.$getScaleBitmapWidth()),c=Math.round(r.$getScaleBitmapHeight()),p=r.$sourceWidth,h=r.$sourceHeight;egret.sys.BitmapNode.$updateTextureData(t.$renderNode,r.$bitmapData,r.$bitmapX,r.$bitmapY,o,a,n,i,s,u,l,c,p,h,egret.BitmapFillMode.SCALE,e[2])}},e.prototype.$measureContentBounds=function(t){var e=this.$MovieClip[0];if(e){var r=e._offsetX,n=e._offsetY,i=e.$getTextureWidth(),o=e.$getTextureHeight();t.setTo(r,n,i,o)}else t.setEmpty()},e}(egret.DisplayObject);t.MovieClip=e,__reflect(e.prototype,"TRain.MovieClip")}(TRain||(TRain={}));var TRain;!function(t){var e=function(){function t(t,e,r){var n=this;n.numFrames=0,n.loop=0,n.intervalTime=0,n.duration=0,n.frames=[],n._texData=e,n._sheet=r,t&&n.fillMCData(t)}return t.prototype.clone=function(e){var r=this,n=new t(null,r._texData,r._sheet);n.numFrames=r.numFrames,n.loop=r.loop,n.frameRate=r.frameRate,n.intervalTime=r.intervalTime,n.duration=r.duration;var i=r.frames.concat();return n.frames=e?i.reverse():i,n.labels=r.labels,n.events=r.events,n.aniName=r.aniName,n.resName=r.resName,n},t.prototype.getKeyFrame=function(t){return this.frames[t]},t.prototype.getFrameTex=function(t){var e=this.getKeyFrame(t);if(e.res){var r=this.getTex(e.res);return r.$offsetX=0|e.x,r.$offsetY=0|e.y,r}return null},t.prototype.getTex=function(t){var e=this,r=e._sheet.getTexture(t);if(!r){var n=e._texData[t];r=e._sheet.createTexture(t,n.x,n.y,n.w,n.h)}return r},t.prototype.fillMCData=function(t){var e=this,r=t.frameRate||24;e.frameRate=r,e.intervalTime=1e3/r,e.loop=t.loop||0,e.fillFramesData(t.frames),e.fillFramesEvent(t.events),e.labels=t.labels},t.prototype.fillFramesData=function(t){for(var e=this,r=e.frames,n=t?t.length:0,i=0;n>i;i++){var o=t[i];if(r.push(o),o.duration){var a=o.duration;if(a>1)for(var s=1;a>s;s++)r.push(o)}}n=r.length,e.numFrames=n,e.duration=n*e.intervalTime},t.prototype.fillFramesEvent=function(t){var e=t?t.length:0;if(e>0){for(var r={},n=0;e>n;n++){var i=t[n];r[i.frame]=i}this.events=r}},t}();t.MovieClipData=e,__reflect(e.prototype,"TRain.MovieClipData")}(TRain||(TRain={}));var TRain;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setEaseFun=function(t){this._easeFun=t},e.prototype.update=function(t){var e=this,r=e._easeFun;r&&(t=r(t)),e.doUpdate(t)},e.prototype.doUpdate=function(t){},e}(t.Action);t.ActionTween=e,__reflect(e.prototype,"TRain.ActionTween");var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.once=!0,e}return __extends(e,t),e.prototype.setCall=function(t,e){this._cb={fun:t,tar:e}},e.prototype.clear=function(){var t=this;t._tar=null,t._cb=null},e.prototype.stop=function(){var t=this;t._tar=null,t.once&&(t._cb=null)},e.prototype.doUpdate=function(t){var e=this,r=e._cb;r&&r.fun.call(r.tar,t)},e}(e);t.ActionTweenCall=r,__reflect(r.prototype,"TRain.ActionTweenCall");var n=function(t){function e(e,r,n){var i=t.call(this,e,r)||this;return i._props=n,i}return __extends(e,t),e.prototype.setProps=function(t){this._props=t},e.prototype.addProp=function(t,e,r){var n=this._props;n||(n={},this._props=n),n[t]={b:e,r:r-e}},e.prototype.start=function(e){t.prototype.start.call(this,e);var r=this,n=r._props;if(n)for(var i in n)e[i]=n[i].b},e.prototype.doUpdate=function(t){var e=this,r=e._tar,n=e._props;for(var i in n){var o=n[i];r[i]=o.b+o.r*t}},e}(e);t.ActionPropTween=n,__reflect(n.prototype,"TRain.ActionPropTween");var i=function(t){function e(e,r,n){var i=t.call(this,e,r)||this;return i._toProps=n,i}return __extends(e,t),e.prototype.setProps=function(t){this._toProps=t},e.prototype.addProp=function(t,e){var r=this._toProps;r||(r={},this._toProps=r),r[t]=e},e.prototype.start=function(e){t.prototype.start.call(this,e);var r=this,n=r._toProps,i={};if(n)for(var o in n){var a=e[o];i[o]={b:a,r:n[o]-a}}r._props=i},e.prototype.doUpdate=function(t){var e=this,r=e._tar,n=e._props;for(var i in n){var o=n[i];r[i]=o.b+o.r*t}},e}(e);t.ActionPropTo=i,__reflect(i.prototype,"TRain.ActionPropTo");var o=function(t){function e(e){var r=t.call(this)||this;return e&&r.setActions(e),r}return __extends(e,t),e.prototype.setActions=function(t){var e=this;e._actions=t,e._curIdx=0;for(var r=0,n=0,i=t.length;i>n;++n)r+=t[n].duration;e.duration=r},e.prototype.addAction=function(t){var e=this,r=e._actions;r||(r=[],e._actions=r),r.push(t);var n=e._dur+t.duration;e.duration=n},e.prototype.stop=function(){var e=this,r=e._actions;r.length>e._curIdx&&r[e._curIdx].stop(),t.prototype.stop.call(this)},e.prototype.stopToEnd=function(){for(var e=this,r=e._actions,n=e._curIdx,i=r.length;i>n;++n)r[n].stopToEnd();t.prototype.stop.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this);for(var e=this,r=e._actions,n=0,i=r.length;i>n;++n)r[n].clear();r.length=0},e.prototype.start=function(e){t.prototype.start.call(this,e);var r=this,n=r._actions[0];n.start(e),r._lastSplit=0,r._curSplit=n.duration/r._dur,r._curIdx=0},e.prototype.update=function(t){for(var e=this,r=e._curIdx,n=e._actions;r<n.length;){var i=n[r],o=Math.min(1,e._curSplit+e._lastSplit);if(!(t>=o)){i.update((t-e._lastSplit)/e._curSplit);break}if(i.update(1),i.stop(),r++,e._curIdx=r,r<n.length){var a=n[r];a.start(e._tar),e._lastSplit=o,e._curSplit=a.duration/e._dur}}},e}(e);t.ActionSequence=o,__reflect(o.prototype,"TRain.ActionSequence");var a=function(e){function r(t){var r=e.call(this)||this;return t&&r.setActions(t),r}return __extends(r,e),r.prototype.setActions=function(e){for(var r,n=this,i=0,a=0,s=e.length;s>a;++a)r=e[a],i<r.duration&&(i=r.duration);var u,l,c=[];for(a=0;s>a;++a)r=e[a],r.duration<i?(u=new o,l=new t.Action,l.duration=i-r.duration,u.setActions([r,l]),c.push(u)):c.push(r);n._actions=c,n.duration=i},r.prototype.stop=function(){for(var t=this._actions,r=0,n=t.length;n>r;++r)t[r].stop();e.prototype.stop.call(this)},r.prototype.stopToEnd=function(){for(var t=this._actions,r=0,n=t.length;n>r;++r)t[r].stopToEnd();e.prototype.stop.call(this)},r.prototype.clear=function(){e.prototype.clear.call(this);for(var t=this,r=t._actions,n=0,i=r.length;i>n;++n)r[n].clear();r.length=0},r.prototype.start=function(t){e.prototype.start.call(this,t);for(var r=this._actions,n=0,i=r.length;i>n;++n)r[n].start(t)},r.prototype.update=function(t){for(var e=this._actions,r=0,n=e.length;n>r;++r)e[r].update(t)},r}(e);t.ActionSpawn=a,__reflect(a.prototype,"TRain.ActionSpawn")}(TRain||(TRain={}));var TRain;!function(t){var e=function(){function e(t){var e=this;e.name=t,e._cbs=[],e._subTexs={},e._refCnt=0}return e.prototype.getTexture=function(e,r,n){var i=this;if(!i._texData){var o=i._cbs;return o.push({name:e,comp:r,thisObj:n}),void(1===o.length&&t.assetMgr.getTex(CONF.sheetUrl+i.name+".st",i.loadImageSetFin,i,"st"))}var a=i._getTexture(e);r.call(n,a)},e.prototype._getTexture=function(e){var r=this,n=r._subTexs[e];if(!n){var i=r._texData,o=i.conf[e];if(o){if(n=new t.TexData,n.name=e,n.pname=r.name,n.$bitmapData=i.$bitmapData,0==e.indexOf("mk_"))0==e.indexOf("mk_h_")?n.$initData(o.x,o.y+1,o.w,o.h-2,o.ox,o.oy,o.sw,o.sh-2,i.$sourceWidth,i.$sourceHeight):0==e.indexOf("mk_w_")?n.$initData(o.x+1,o.y,o.w-2,o.h,o.ox,o.oy,o.sw-2,o.sh,i.$sourceWidth,i.$sourceHeight):n.$initData(o.x+1,o.y+1,o.w-2,o.h-2,o.ox,o.oy,o.sw-2,o.sh-2,i.$sourceWidth,i.$sourceHeight);else if(n.$initData(o.x,o.y,o.w,o.h,o.ox,o.oy,o.sw,o.sh,i.$sourceWidth,i.$sourceHeight),o.scale9grid){var a=o.scale9grid,s=a.split(",");n.scale9Grid=new egret.Rectangle(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3]))}r._subTexs[e]=n}}return n?(n.$addRef(),r._refCnt++):egret.log("subTexture not find  subname="+e+"  name="+r.name),n},e.prototype.loadImageSetFin=function(t){var e,r=this,n=r._cbs,i=n.length;if(t){r._texData=t;var o=r._subTexs,a=t.$bitmapData;for(var s in o){var u=o[s];u.$bitmapData=a}var l=0;for(l=0;i>l;++l)e=n[l],e.subTexData=r._getTexture(e.name);for(l=0;i>l;++l)e=n[l],e.comp.call(e.thisObj,e.subTexData)}else for(var l=0;i>l;++l)e=n[l],e.comp.call(e.thisObj,null);n.length=0},e.prototype.releaseBubTex=function(e){e.$subRef();var r=this;if(r._refCnt--,r._refCnt<=0){var n=r._subTexs;for(var i in n){var o=n[i];o.$bitmapData=null}e=r._texData,r._texData=null,t.assetMgr.releaseTex(e)}},e}();t.ImageSet=e,__reflect(e.prototype,"TRain.ImageSet")}(TRain||(TRain={}));var TRain;!function(TRain){var UITheme;!function(UITheme){function loadInitConf(t,e,r){_initFin=e,_initTar=r,RES.getResByUrl(t,onConfigLoaded,UITheme,RES.ResourceItem.TYPE_JSON)}function setCurGp(t){_curGp=t}function addSkinConf(t,e){var r=_skinConfs;if(e){var n=e+".";for(var i in t)r[n+i]=t[i]}else for(var i in t)r[i]=t[i]}function getSkin(t){var e=_skinMap[t];if(e)return e;if(e=parseSkin(t))return e;if(_curGp){var r=_curGp+"."+t;if(e=_skinMap[r])return e;e=parseSkin(r)}return e}function onConfigLoaded(t,e){addSkinConf(t),RES.destroyRes(e),onInited()}function onInited(){_initFin&&(_initFin.call(_initTar),_initFin=null,_initTar=null)}function parseSkin(t){var e=_skinConfs,r=e[t];if(!r)return null;delete e[t],r=r.replace(/#4/g,"new cui."),r=r.replace(/#3/g,"return "),r=r.replace(/#2/g,"this."),r=r.replace(/#1/g,"function(");var n=parse(r);return _skinMap[t]=n,n}function parse(code){var clazz;try{clazz=eval(code),code=null}catch(e){return null}return clazz}var _skinMap={},_skinConfs={},_initFin,_initTar,_curGp;UITheme.loadInitConf=loadInitConf,UITheme.setCurGp=setCurGp,UITheme.addSkinConf=addSkinConf,UITheme.getSkin=getSkin}(UITheme=TRain.UITheme||(TRain.UITheme={}))}(TRain||(TRain={}));var TRain;!function(t){var e=function(){function t(){}return t.prototype.fetchVersion=function(t){var e=this;if(e._verInfo||!CONF.verFile)return void t.onSuccess(null);e._cb=t;var r=new egret.HttpRequest;r.addEventListener(egret.Event.COMPLETE,e.onLoadFinish,e),r.addEventListener(egret.IOErrorEvent.IO_ERROR,e.onLoadFinish,e),r.responseType=egret.HttpResponseType.TEXT,r.open(CONF.verFile),r.send()},t.prototype.onLoadFinish=function(t){var e=this,r=!1;if(t.type==egret.Event.COMPLETE)try{var n=t.target;e._verInfo=JSON.parse(n.response),r=!0}catch(i){egret.log("version parse fail")}else egret.log("version load fail");var o=e._cb;r?o.onSuccess(null):o.onFail(1,null),e._cb=null},t.prototype.addWebVer=function(t){var e=this._verInfo;for(var r in t){var n=t[r],i=e[r];if(i)for(var o in n)i[o]=n[o];else e[r]=n}},t.prototype.getChangeList=function(){return[]},t.prototype.getVirtualUrl=function(t){var e=t.lastIndexOf("."),r=t.substring(e+1);if(r.indexOf("?")>0)return CONF.resHome+t;var n=this._verInfo;if(n){var i=void 0,o=n[r];if(o){var a=t.substring(0,e);i=o[a]}if(i||(i=n.ver),i)return CONF.resHome+t.substring(0,e)+"_"+i+"."+r}return CONF.resHome+t},t}();t.WebVerController=e,__reflect(e.prototype,"TRain.WebVerController",["RES.VersionController","RES.IVersionController"])}(TRain||(TRain={}));var cui;!function(t){var e=function(e){function r(t){var r=e.call(this)||this,n=r;return n._fontChanged=!1,n.$BC=[0/0,0/0,0/0,0/0,0/0,0/0,0/0,0/0,!1],n._invalidProps=0,t&&n.$setText(t),r}return __extends(r,e),Object.defineProperty(r.prototype,"filterNm",{get:function(){return this.$BC[12]},set:function(e){this.$BC[12]=e,this.filters=e&&e.length>0?t.uiMgr.getFilters(e):null},enumerable:!0,configurable:!0}),r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r);var n=this;n._fontChanged&&n.parseFont(),n._invalidProps>0&&n.validateProps()},r.prototype.$setText=function(t){var r=e.prototype.$setText.call(this,t);return r&&this.invalidateProps(128),r},r.prototype.$setFont=function(t){var e=this;return e._font==t?!1:(e._font=t,e.$stage?e.parseFont():e._fontChanged=!0,e.$fontStringChanged=!0,!0)},r.prototype.parseFont=function(){var t=this;t._fontChanged=!1,t._font?TRain.assetMgr.getFont(t._font,t.onFontChanged,t):t.$setFontData(null)},r.prototype.onFontChanged=function(t,e){var r=this;e===r._font&&r.$setFontData(t)},r.prototype.$setFontData=function(t){var e=this;return t==e.$font?!1:(e.$font=t,""!=e.text&&(e.$invalidateContentBounds(),e.invalidateProps(64)),!0)},r.prototype.dispose=function(){this._disposed=!0},r.prototype.$setWidth=function(t){var r=e.prototype.$setWidth.call(this,t);return r&&this.invalidateProps(2),r},r.prototype.$setHeight=function(t){var r=e.prototype.$setHeight.call(this,t);return r&&this.invalidateProps(2),r},Object.defineProperty(r.prototype,"txtKey",{set:function(t){var e=TRain.langMgr.getTxtByKey(t);e&&(this.text=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.$BC[0]},set:function(t){t=+t;var e=this.$BC;e[0]!==t&&(e[0]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$BC[2]},set:function(t){t=+t;var e=this.$BC;e[2]!==t&&(e[2]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$BC[1]},set:function(t){t=+t;var e=this.$BC;e[1]!==t&&(e[1]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$BC[3]},set:function(t){t=+t;var e=this.$BC;e[3]!=t&&(e[3]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hCenter",{get:function(){return this.$BC[4]},set:function(t){t=+t;var e=this.$BC;e[4]!==t&&(e[4]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vCenter",{get:function(){return this.$BC[5]},set:function(t){t=+t;var e=this.$BC;e[5]!==t&&(e[5]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perWidth",{get:function(){return this.$BC[6]},set:function(t){t=+t;var e=this.$BC;e[6]!==t&&(e[6]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"perHeight",{get:function(){return this.$BC[7]},set:function(t){t=+t;var e=this.$BC;e[7]!==t&&(e[7]=t,this.setNeedPLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPLayout",{get:function(){return this.$BC[8]},enumerable:!0,configurable:!0}),r.prototype.setNeedPLayout=function(){var t=this,e=t.$BC,r=t.$parent;e[8]||(e[8]=!0,r&&r.openLayout()),r&&r.invalidateDL()},r.prototype.invalidateProps=function(e){var r=this;r.$stage&&!r._invalidPropsFlag&&(r._invalidPropsFlag=!0,t.uiMgr.invalidateProperty(r)),r._invalidProps|=e},r.prototype.validateProps=function(){var t=this,e=t._invalidProps;if(0!=e){var r=t.$BC;r[8]&&t.$parent&&""!=t.text&&t.$parent.invalidateDL(),t._invalidProps=0,t._invalidPropsFlag=!1}},r}(egret.BitmapText);t.BitmapLabel=e,__reflect(e.prototype,"cui.BitmapLabel",["cui.IBaseCtrl","cui.ILayout","egret.DisplayObject"])}(cui||(cui={})),egret.BitmapFont.prototype.getTexture=function(t){var e=this,r=e._textureMap[t];if(!r){var n=e.charList[t];if(!n){var i=e.charTrans;i&&(n=e.charList[i[t]])}n&&(r=e.createTexture(t,n.x,n.y,n.w,n.h,n.ox,n.oy,n.sw,n.sh),e._textureMap[t]=r)}return r},egret.BitmapFont.prototype._getFirstCharHeight=function(){var t=this;if(0==t.firstCharHeight)for(var e in t.charList){var r=t.charList[e];
if(r){var n=r.sw;if(void 0===n){var i=r.h;void 0===i&&(i=0);var o=r.oy;void 0===o&&(o=0),n=i+o}if(0>=n)continue;this.firstCharHeight=n;break}}return this.firstCharHeight};var TRain;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parseSpriteSheet=function(t,e,r,n){var i=JSON.parse(e),o=new egret.BitmapFont(t,i);n&&(o.charTrans=JSON.parse(n)),this.fileDic[r]=o},e.prototype.destroyRes=function(t){var e=this.fileDic,r=e[t];return r?(delete e[t],r.dispose(),!0):!1},e}(t.SheetAnalyzer);t.FontAnalyzer=e,__reflect(e.prototype,"TRain.FontAnalyzer"),RES.registerAnalyzer("fnt",e)}(TRain||(TRain={}));var TRain;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parseSpriteSheet=function(t,e,r){var n=JSON.parse(e);t.name=r,t.conf=n,this.fileDic[r]=t},e}(t.SheetAnalyzer);t.MCAnalyzer=e,__reflect(e.prototype,"TRain.MCAnalyzer"),RES.registerAnalyzer("mc",e)}(TRain||(TRain={}));var TRain;!function(t){var e=function(){function e(){var e=this;e._active=!0,e._curMusic={sound:null,channel:null},e._sfxs=new CMap,e._plays=new CMap;var r=t.core.stage;r.addEventListener(egret.Event.ACTIVATE,function(){e._active=!0,e._musicState&&e._musicNm&&e.playMusic(e._musicNm,!0)},e),r.addEventListener(egret.Event.DEACTIVATE,function(){e._active=!1,e.stopAllSFX(),e.stopMusic()},e)}return Object.defineProperty(e.prototype,"musicState",{get:function(){return this._musicState},set:function(t){var e=this;e._musicState!=t&&(e._musicState=t,t&&e._active?e.playMusic(e._musicNm,!0):e.stopMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sfxState",{get:function(){return this._sfxState},set:function(t){var e=this;e._sfxState!=t&&(e._sfxState=t,t||e.stopAllSFX())},enumerable:!0,configurable:!0}),e.prototype.getUrl=function(t){return CONF.soundUrl+t+".mp3"},e.prototype.playMusic=function(t,e){var r=this;if(t&&(r._musicNm!=t||e)&&(r._musicNm=t,r._musicState&&r._active)){r.stopMusic();var n=new egret.Sound;n.addEventListener(egret.Event.COMPLETE,function(e){var n=e.target;if(t!=r._musicNm)return void n.close();var i=r._curMusic,o=n.play();i.sound=n,i.channel=o},r),n.load(RES.$getVirtualUrl(r.getUrl(t)))}},e.prototype.stopMusic=function(){var t=this,e=t._curMusic;e.channel&&(e.channel.stop(),e.channel=null),e.sound&&(e.sound.close(),e.sound=null)},e.prototype.playSFX=function(r,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var o=this;if(!o._sfxState||!o._active||!r)return 0;var a=e.UUID++,s={nm:r,delay:n,duration:i,uuid:a};return n>0?t.core.addDelayDo(o._playSfx,o,n,0,!1,s):o._playSfx(s),a},e.prototype.stopSFX=function(t){this.rmvChannelById(t)},e.prototype.stopAllSFX=function(){for(var t=this._sfxs,e=t.values,r=0,n=e.length;n>r;++r){var i=e[r];if(i.stoped=!0,i.loaded){for(var o=i.channels.values,a=0,s=o.length;s>a;++a){var u=o[a];u.stop()}i.sound.close()}}t.clear(),this._plays.clear()},e.prototype._playSfx=function(e){var r=this;if(r._sfxState&&r._active){var n=e.uuid,i=e.duration;i>0&&t.core.addDelayDo(r.rmvChannelById,r,i,0,!1,n);var o=e.nm,a=r._sfxs.get(o);if(a){if(!a.loaded)return;return void r.playImpl(a,1,e.uuid)}var s=new egret.Sound,u=new CMap;a={sound:s,channels:u,nm:o,loaded:!1,stoped:!1},r._sfxs.set(o,a),r.addChannel(a,null,n);var l=function(t){if(a.stoped)a.sound.close();else{a.loaded=!0;var e=a.channels;e.has(n)&&r.playImpl(a,1,n)}};s.addEventListener(egret.Event.COMPLETE,l,r);var c=r.getUrl(o);s.load(RES.$getVirtualUrl(c))}},e.prototype.playImpl=function(t,e,r){var n=this,i=t.sound.play(0,e);n.addChannel(t,i,r),i.uuid=r,i.addEventListener(egret.Event.SOUND_COMPLETE,n.onSoundComplete,n),t.channels.set(r,i)},e.prototype.addChannel=function(t,e,r){t.channels.set(r,e),this._plays.set(r,t)},e.prototype.rmvChannelById=function(t){var e=this._plays,r=e.get(t);if(r){var n=r.channels.get(t);n&&n.stop(),r.channels["delete"](t),e["delete"](t)}},e.prototype.onSoundComplete=function(t){this.rmvChannelById(t.target.uuid)},e.prototype.gcRess=function(){var t=this._sfxs,e=t.values,r=[],n=0;for(n=e.length-1;n>=0;--n){var i=e[n];i.channels.size<=0&&(i.sound.close(),r.push(i.nm))}var o=r.length;if(o>0)for(n=o;n>=0;--n)t["delete"](r[n])},e.UUID=1,e}();t.SoundManager=e,__reflect(e.prototype,"TRain.SoundManager")}(TRain||(TRain={}));var EaseUtil;!function(t){function e(t){return function(e){return Math.pow(e,t)}}function r(t){return function(e){return 1-Math.pow(1-e,t)}}function n(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}function i(t){return 1-Math.cos(t*Math.PI/2)}function o(t){return Math.sin(t*Math.PI/2)}function a(t){return-.5*(Math.cos(Math.PI*t)-1)}function s(t){return function(e){return e*e*((t+1)*e-t)}}function u(t){return function(e){return--e*e*((t+1)*e+t)+1}}function l(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}}function c(t){return-(Math.sqrt(1-t*t)-1)}function p(t){return Math.sqrt(1- --t*t)}function h(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function d(t){return 1-f(1-t)}function f(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function v(t){return.5>t?.5*d(2*t):.5*f(2*t-1)+.5}function g(t,e){var r=2*Math.PI,n=e/r*Math.asin(1/t);return function(i){return 0==i||1==i?i:-(t*Math.pow(2,10*(i-=1))*Math.sin((i-n)*r/e))}}function y(t,e){var r=2*Math.PI,n=e/r*Math.asin(1/t);return function(i){return 0==i||1==i?i:t*Math.pow(2,-10*i)*Math.sin((i-n)*r/e)+1}}function _(t,e){var r=2*Math.PI,n=e/r*Math.asin(1/t);return function(i){return(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-n)*r/e)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-n)*r/e)*.5+1}}function m(t,e){var r=2*Math.PI;return e/=100,e>1&&(e=1),function(n){var i=n*t,o=Math.floor(i),a=(i-o)*r;return Math.sin(a)*(1-e*o*n)}}t.getPowIn=e,t.getPowOut=r,t.getPowInOut=n,t.quadIn=e(2),t.quadOut=r(2),t.quadInOut=n(2),t.cubicIn=e(3),t.cubicOut=r(3),t.cubicInOut=n(3),t.quartIn=e(4),t.quartOut=r(4),t.quartInOut=n(4),t.quintIn=e(5),t.quintOut=r(5),t.quintInOut=n(5),t.sineIn=i,t.sineOut=o,t.sineInOut=a,t.getBackIn=s,t.backIn=s(1.7),t.getBackOut=u,t.backOut=u(1.7),t.getBackInOut=l,t.backInOut=l(1.7),t.circIn=c,t.circOut=p,t.circInOut=h,t.bounceIn=d,t.bounceOut=f,t.bounceInOut=v,t.getElasticIn=g,t.elasticIn=g(1,.3),t.getElasticOut=y,t.elasticOut=y(1,.3),t.getElasticInOut=_,t.elasticInOut=_(1,.3*1.5),t.getQuakeFun=m,t.waveRandFun=function(t){return 0===t||1===t?0:Math.random()<.5?Math.random():-Math.random()}}(EaseUtil||(EaseUtil={}));var cui;!function(t){var e=function(t){function e(){var e=t.call(this)||this,r=e;return r.scaleTime=60,r.smallRatio=.85,r.bigRatio=1.15,e}return __extends(e,t),e.prototype.onPartAdded=function(){t.prototype.onPartAdded.call(this);var e=this,r=e.skAniGp;r.x=Math.floor(.5*e.width),r.y=Math.floor(.5*e.height),r.anthorPerX=.5,r.anthorPerY=.5},e.prototype.onTouchBegin=function(e){t.prototype.onTouchBegin.call(this,e),this.scaleSmall()},e.prototype.onTouchFinish=function(){var e=this;e._tempStage&&e.scaleBig(),t.prototype.onTouchFinish.call(this)},e.prototype.scaleSmall=function(){var t=this,e=t.skAniGp;if(e){t.clearAction();var r=t.smallRatio,n=new TRain.ActionPropTo(t.scaleTime,1,{scaleX:r,scaleY:r});t._action=n,TRain.actionMgr.addAction(n,e,!1)}},e.prototype.scaleBig=function(){var t=this,e=t.skAniGp;if(e){t.clearAction();var r=t.bigRatio,n=t.scaleTime,i=new TRain.ActionPropTo(2*n,1,{scaleX:r,scaleY:r}),o=new TRain.ActionPropTo(n,1,{scaleX:1,scaleY:1}),a=t._action=new TRain.ActionSequence([i,o]);TRain.actionMgr.addAction(a,e,!1)}},e.prototype.clearAction=function(){var t=this._action;t&&(TRain.actionMgr.rmvAction(t),this._action=null)},e.prototype.dispose=function(){this.clearAction(),t.prototype.dispose.call(this)},e}(t.Button);t.ScaleButton=e,__reflect(e.prototype,"cui.ScaleButton")}(cui||(cui={}));